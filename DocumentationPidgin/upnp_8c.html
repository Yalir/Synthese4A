<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>upnp.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('upnp_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">upnp.c File Reference<div class="ingroups"><a class="el" href="group__core.html">libpurple</a></div></div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;internal.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="upnp_8h_source.html">upnp.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="eventloop_8h_source.html">eventloop.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="network_8h_source.html">network.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="proxy_8h_source.html">proxy.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="signals_8h_source.html">signals.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="xmlnode_8h_source.html">xmlnode.h</a>&quot;</code><br/>
</div>
<p><a href="upnp_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_purple_u_pn_p_control_info.html">PurpleUPnPControlInfo</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_u_pn_p_discovery_data.html">UPnPDiscoveryData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">_UPnPMappingAddRemove</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a02e6d59009dee759528ec81fc9a8eeff"></a><!-- doxytag: member="upnp.c::HTTP_OK" ref="a02e6d59009dee759528ec81fc9a8eeff" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HTTP_OK</b>&#160;&#160;&#160;&quot;200 OK&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc476b8e19df2e50e6759f1832030a7b"></a><!-- doxytag: member="upnp.c::DEFAULT_HTTP_PORT" ref="abc476b8e19df2e50e6759f1832030a7b" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_HTTP_PORT</b>&#160;&#160;&#160;80</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae37d676223c2f4bce9a8f0fd24599979"></a><!-- doxytag: member="upnp.c::DISCOVERY_TIMEOUT" ref="ae37d676223c2f4bce9a8f0fd24599979" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DISCOVERY_TIMEOUT</b>&#160;&#160;&#160;1000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1bfef29f3c06e92de1766a93f4443033"></a><!-- doxytag: member="upnp.c::MAX_UPNP_DOWNLOAD" ref="a1bfef29f3c06e92de1766a93f4443033" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_UPNP_DOWNLOAD</b>&#160;&#160;&#160;(128 * 1024)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac1e75209dc676838122b049fcc397c13"></a><!-- doxytag: member="upnp.c::NUM_UDP_ATTEMPTS" ref="ac1e75209dc676838122b049fcc397c13" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NUM_UDP_ATTEMPTS</b>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14695a5aa0c9e3794761504676914f11"></a><!-- doxytag: member="upnp.c::HTTPMU_HOST_ADDRESS" ref="a14695a5aa0c9e3794761504676914f11" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HTTPMU_HOST_ADDRESS</b>&#160;&#160;&#160;&quot;239.255.255.250&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af01892b00edb0cce317934ae21d47164"></a><!-- doxytag: member="upnp.c::HTTPMU_HOST_PORT" ref="af01892b00edb0cce317934ae21d47164" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HTTPMU_HOST_PORT</b>&#160;&#160;&#160;1900</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8792c12676ad6f5e877499b2b7a85695"></a><!-- doxytag: member="upnp.c::SEARCH_REQUEST_DEVICE" ref="a8792c12676ad6f5e877499b2b7a85695" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SEARCH_REQUEST_DEVICE</b>&#160;&#160;&#160;&quot;urn:schemas-upnp-org:service:%s&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>SEARCH_REQUEST_STRING</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc246389d12567d4eba3d9677c66e0bb"></a><!-- doxytag: member="upnp.c::WAN_IP_CONN_SERVICE" ref="adc246389d12567d4eba3d9677c66e0bb" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>WAN_IP_CONN_SERVICE</b>&#160;&#160;&#160;&quot;WANIPConnection:1&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a09aa251b9ea7e59da3946680e4c9b13d"></a><!-- doxytag: member="upnp.c::WAN_PPP_CONN_SERVICE" ref="a09aa251b9ea7e59da3946680e4c9b13d" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>WAN_PPP_CONN_SERVICE</b>&#160;&#160;&#160;&quot;WANPPPConnection:1&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>HTTP_HEADER_ACTION</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>SOAP_ACTION</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08d8000815a14f7cf2714242fd2778bb"></a><!-- doxytag: member="upnp.c::PORT_MAPPING_LEASE_TIME" ref="a08d8000815a14f7cf2714242fd2778bb" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PORT_MAPPING_LEASE_TIME</b>&#160;&#160;&#160;&quot;0&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae10a4e853bc67b642f7fd342737c0e52"></a><!-- doxytag: member="upnp.c::PORT_MAPPING_DESCRIPTION" ref="ae10a4e853bc67b642f7fd342737c0e52" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PORT_MAPPING_DESCRIPTION</b>&#160;&#160;&#160;&quot;PURPLE_UPNP_PORT_FORWARD&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADD_PORT_MAPPING_PARAMS</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>DELETE_PORT_MAPPING_PARAMS</b></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><b>PurpleUPnPStatus</b> { <b>PURPLE_UPNP_STATUS_UNDISCOVERED</b> =  -1, 
<b>PURPLE_UPNP_STATUS_UNABLE_TO_DISCOVER</b>, 
<b>PURPLE_UPNP_STATUS_DISCOVERING</b>, 
<b>PURPLE_UPNP_STATUS_DISCOVERED</b>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8c.html#a42a4ba88ba568cf8cb1115b4b787a8f1">purple_upnp_discover</a> (PurpleUPnPCallback cb, gpointer <a class="el" href="structcb__data.html">cb_data</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const gchar *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8c.html#a6d9207154fa22f1742c2d8fa4d4ae611">purple_upnp_get_public_ip</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8c.html#ab4264a7198a10938b2ee5c61be737447">purple_upnp_cancel_port_mapping</a> (<a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *ar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8c.html#a3a9a38e1b37575b21bfbe56ab29b68f9">purple_upnp_set_port_mapping</a> (unsigned short portmap, const gchar *protocol, PurpleUPnPCallback cb, gpointer <a class="el" href="structcb__data.html">cb_data</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0f8dfce9859badfa028c5805af64cf0b"></a><!-- doxytag: member="upnp.c::purple_upnp_remove_port_mapping" ref="a0f8dfce9859badfa028c5805af64cf0b" args="(unsigned short portmap, const char *protocol, PurpleUPnPCallback cb, gpointer cb_data)" -->
<a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>purple_upnp_remove_port_mapping</b> (unsigned short portmap, const char *protocol, PurpleUPnPCallback cb, gpointer <a class="el" href="structcb__data.html">cb_data</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8c.html#a7653636b1566c48d774ede5c76502454">purple_upnp_init</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>UPnP Implementation </p>

<p>Definition in file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a4ab7dee0fcfe92817fb5757cc4572049"></a><!-- doxytag: member="upnp.c::ADD_PORT_MAPPING_PARAMS" ref="a4ab7dee0fcfe92817fb5757cc4572049" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADD_PORT_MAPPING_PARAMS</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="stringliteral">&quot;&lt;NewRemoteHost&gt;&lt;/NewRemoteHost&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewExternalPort&gt;%i&lt;/NewExternalPort&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewProtocol&gt;%s&lt;/NewProtocol&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewInternalPort&gt;%i&lt;/NewInternalPort&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewInternalClient&gt;%s&lt;/NewInternalClient&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewEnabled&gt;1&lt;/NewEnabled&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewPortMappingDescription&gt;&quot;</span> \
        PORT_MAPPING_DESCRIPTION \
        <span class="stringliteral">&quot;&lt;/NewPortMappingDescription&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewLeaseDuration&gt;&quot;</span> \
        PORT_MAPPING_LEASE_TIME \
        <span class="stringliteral">&quot;&lt;/NewLeaseDuration&gt;\r\n&quot;</span>
</pre></div>
<p>Definition at line <a class="el" href="upnp_8c_source.html#l00093">93</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28dc5fc887a1fc10409b44f516ea1dbc"></a><!-- doxytag: member="upnp.c::DELETE_PORT_MAPPING_PARAMS" ref="a28dc5fc887a1fc10409b44f516ea1dbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DELETE_PORT_MAPPING_PARAMS</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="stringliteral">&quot;&lt;NewRemoteHost&gt;&lt;/NewRemoteHost&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewExternalPort&gt;%i&lt;/NewExternalPort&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;NewProtocol&gt;%s&lt;/NewProtocol&gt;\r\n&quot;</span>
</pre></div>
<p>Definition at line <a class="el" href="upnp_8c_source.html#l00107">107</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4ef37e7508f3cb712bf7f30b4b94d56b"></a><!-- doxytag: member="upnp.c::HTTP_HEADER_ACTION" ref="a4ef37e7508f3cb712bf7f30b4b94d56b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HTTP_HEADER_ACTION</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="stringliteral">&quot;POST /%s HTTP/1.1\r\n&quot;</span> \
        <span class="stringliteral">&quot;HOST: %s:%d\r\n&quot;</span> \
        <span class="stringliteral">&quot;SOAPACTION: \&quot;urn:schemas-upnp-org:service:%s#%s\&quot;\r\n&quot;</span> \
        <span class="stringliteral">&quot;CONTENT-TYPE: text/xml ; charset=\&quot;utf-8\&quot;\r\n&quot;</span> \
        <span class="stringliteral">&quot;CONTENT-LENGTH: %&quot;</span> G_GSIZE_FORMAT <span class="stringliteral">&quot;\r\n\r\n&quot;</span>
</pre></div>
<p>Definition at line <a class="el" href="upnp_8c_source.html#l00072">72</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a926a5dbce75994e2d9b7273b643d0793"></a><!-- doxytag: member="upnp.c::SEARCH_REQUEST_STRING" ref="a926a5dbce75994e2d9b7273b643d0793" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEARCH_REQUEST_STRING</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="stringliteral">&quot;M-SEARCH * HTTP/1.1\r\n&quot;</span> \
        <span class="stringliteral">&quot;MX: 2\r\n&quot;</span> \
        <span class="stringliteral">&quot;HOST: 239.255.255.250:1900\r\n&quot;</span> \
        <span class="stringliteral">&quot;MAN: \&quot;ssdp:discover\&quot;\r\n&quot;</span> \
        <span class="stringliteral">&quot;ST: urn:schemas-upnp-org:service:%s\r\n&quot;</span> \
        <span class="stringliteral">&quot;\r\n&quot;</span>
</pre></div>
<p>Definition at line <a class="el" href="upnp_8c_source.html#l00058">58</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a31d7e75b73ef9ff9fd893ef348d26df4"></a><!-- doxytag: member="upnp.c::SOAP_ACTION" ref="a31d7e75b73ef9ff9fd893ef348d26df4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOAP_ACTION</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;s:Envelope xmlns:s=\&quot;http://schemas.xmlsoap.org/soap/envelope/\&quot; &quot;</span> \
                <span class="stringliteral">&quot;s:encodingStyle=\&quot;http://schemas.xmlsoap.org/soap/encoding/\&quot;&gt;\r\n&quot;</span> \
          <span class="stringliteral">&quot;&lt;s:Body&gt;\r\n&quot;</span> \
            <span class="stringliteral">&quot;&lt;u:%s xmlns:u=\&quot;urn:schemas-upnp-org:service:%s\&quot;&gt;\r\n&quot;</span> \
              <span class="stringliteral">&quot;%s&quot;</span> \
            <span class="stringliteral">&quot;&lt;/u:%s&gt;\r\n&quot;</span> \
          <span class="stringliteral">&quot;&lt;/s:Body&gt;\r\n&quot;</span> \
        <span class="stringliteral">&quot;&lt;/s:Envelope&gt;&quot;</span>
</pre></div>
<p>Definition at line <a class="el" href="upnp_8c_source.html#l00079">79</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab4264a7198a10938b2ee5c61be737447"></a><!-- doxytag: member="upnp.c::purple_upnp_cancel_port_mapping" ref="ab4264a7198a10938b2ee5c61be737447" args="(UPnPMappingAddRemove *ar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_upnp_cancel_port_mapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *&#160;</td>
          <td class="paramname"><em>mapping_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cancel a pending port mapping request initiated with either <a class="el" href="upnp_8c.html#a3a9a38e1b37575b21bfbe56ab29b68f9">purple_upnp_set_port_mapping()</a> or <a class="el" href="upnp_8h.html#a647d4b24df75c29696772cb2f5bb6f82">purple_upnp_remove_port_mapping()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mapping_data</td><td>The data returned when you initiated the UPnP mapping request. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00937">937</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a42a4ba88ba568cf8cb1115b4b787a8f1"></a><!-- doxytag: member="upnp.c::purple_upnp_discover" ref="a42a4ba88ba568cf8cb1115b4b787a8f1" args="(PurpleUPnPCallback cb, gpointer cb_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_upnp_discover </td>
          <td>(</td>
          <td class="paramtype">PurpleUPnPCallback&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>cb_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a discovery request to search for a UPnP enabled IGD that contains the WANIPConnection service that will allow us to recieve the public IP address of the IGD, and control it for forwarding ports. The result will be cached for further use.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>an optional callback function to be notified when the UPnP discovery is complete </td></tr>
    <tr><td class="paramname"><a class="el" href="structcb__data.html">cb_data</a></td><td>Extra data to be passed to the callback </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00641">641</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6d9207154fa22f1742c2d8fa4d4ae611"></a><!-- doxytag: member="upnp.c::purple_upnp_get_public_ip" ref="a6d9207154fa22f1742c2d8fa4d4ae611" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const gchar* purple_upnp_get_public_ip </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the IP address from a UPnP enabled IGD that sits on the local network, so when getting the network IP, instead of returning the local network IP, the public IP is retrieved. This is a cached value from the time of the UPnP discovery.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The IP address of the network, or NULL if something went wrong </dd></dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00746">746</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7653636b1566c48d774ede5c76502454"></a><!-- doxytag: member="upnp.c::purple_upnp_init" ref="a7653636b1566c48d774ede5c76502454" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_upnp_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize UPnP </p>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l01081">1081</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3a9a38e1b37575b21bfbe56ab29b68f9"></a><!-- doxytag: member="upnp.c::purple_upnp_set_port_mapping" ref="a3a9a38e1b37575b21bfbe56ab29b68f9" args="(unsigned short portmap, const gchar *protocol, PurpleUPnPCallback cb, gpointer cb_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a>* purple_upnp_set_port_mapping </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>portmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PurpleUPnPCallback&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>cb_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maps Ports in a UPnP enabled IGD that sits on the local network to this purple client. Essentially, this function takes care of the port forwarding so things like file transfers can work behind NAT firewalls</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">portmap</td><td>The port to map to this client </td></tr>
    <tr><td class="paramname">protocol</td><td>The protocol to map, either "TCP" or "UDP" </td></tr>
    <tr><td class="paramname">cb</td><td>an optional callback function to be notified when the mapping addition is complete </td></tr>
    <tr><td class="paramname"><a class="el" href="structcb__data.html">cb_data</a></td><td>Extra data to be passed to the callback</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Data which can be passed to purple_upnp_port_mapping_cancel() to cancel </dd></dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00968">968</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="upnp_8c.html">upnp.c</a>      </li>
      <li class="footer">Generated on Sun Mar 24 2013 16:05:19 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
