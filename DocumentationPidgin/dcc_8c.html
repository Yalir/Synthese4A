<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>protocols/gg/lib/dcc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('dcc_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">protocols/gg/lib/dcc.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Obsługa połączeń bezpośrednich do wersji Gadu-Gadu 6.x.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;sys/ioctl.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;arpa/inet.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="compat_8h_source.html">compat.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="libgadu_8h_source.html">libgadu.h</a>&quot;</code><br/>
</div>
<p><a href="dcc_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>gg_dcc_read</b>(fd, buf, size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><b>gg_dcc_write</b>(fd, buf, size)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a2a4b4a2ad85a06ba5f2e9c451dc29b6f">gg_dcc_request</a> (struct <a class="el" href="structgg__session.html">gg_session</a> *sess, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> uin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#ae3da65bbe7c3218cb2e502f021032b68">gg_dcc_fill_file_info</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, const char *filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#acb0489366604e61863ca167173f16076">gg_dcc_fill_file_info2</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, const char *filename, const char *local_filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#ab71b56ab1af27f6c9c45d03d43effea5">gg_dcc_get_file</a> (uint32_t ip, uint16_t port, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> my_uin, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> peer_uin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a9e87148a79e8efa4890be95860c425f4">gg_dcc_send_file</a> (uint32_t ip, uint16_t port, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> my_uin, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> peer_uin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a53ac68b8f631a7dff70ba75363a15b2e">gg_dcc_voice_chat</a> (uint32_t ip, uint16_t port, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> my_uin, <a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> peer_uin)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a2b05f4bc46937c62e0794af8b344d9b4">gg_dcc_set_type</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a1f9f10d4d70adeed7e76423fc047c95e">gg_dcc_socket_create</a> (<a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a> uin, uint16_t port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a3ec32ead7968e434b54354fe457a8fe1">gg_dcc_voice_send</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d, char *buf, int length)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgg__event.html">gg_event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a9804ea6dffcb077cd5f7a90d4120dc9b">gg_dcc_watch_fd</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *h)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dcc_8c.html#a5d4489eadc5c531a60a9905894fda6b3">gg_dcc_free</a> (struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *d)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Obsługa połączeń bezpośrednich do wersji Gadu-Gadu 6.x. </p>

<p>Definition in file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a0a15db17ff584aced08c21c3602b3ed0"></a><!-- doxytag: member="dcc.c::gg_dcc_read" ref="a0a15db17ff584aced08c21c3602b3ed0" args="(fd, buf, size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define gg_dcc_read</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fd, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buf, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{ \
        <span class="keywordtype">int</span> tmp = read(fd, buf, size); \
        \
        <span class="keywordflow">if</span> (tmp &lt; (<span class="keywordtype">int</span>) size) { \
                <span class="keywordflow">if</span> (tmp == -1) { \
                        gg_debug(<a class="code" href="libgadu_8h.html#a40e449afb3f941037e1227afe28ddace">GG_DEBUG_MISC</a>, <span class="stringliteral">&quot;// gg_dcc_watch_fd() read() failed (errno=%d, %s)\n&quot;</span>, errno, strerror(errno)); \
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp == 0) { \
                        gg_debug(<a class="code" href="libgadu_8h.html#a40e449afb3f941037e1227afe28ddace">GG_DEBUG_MISC</a>, <span class="stringliteral">&quot;// gg_dcc_watch_fd() read() failed, connection broken\n&quot;</span>); \
                } <span class="keywordflow">else</span> { \
                        gg_debug(<a class="code" href="libgadu_8h.html#a40e449afb3f941037e1227afe28ddace">GG_DEBUG_MISC</a>, <span class="stringliteral">&quot;// gg_dcc_watch_fd() read() failed (%d bytes, %d needed)\n&quot;</span>, tmp, size); \
                } \
                e-&gt;type = <a class="code" href="libgadu_8h.html#a3dd02c0d2ff1d304d134f677faf66cfcaf5c56930008b944423b5ea3927520949">GG_EVENT_DCC_ERROR</a>; \
                e-&gt;event.dcc_error = <a class="code" href="libgadu_8h.html#a8a7800a03f87e95ca36303f0cdf0d163a82b70a0c369d12697a1e90072080ccf9">GG_ERROR_DCC_HANDSHAKE</a>; \
                <span class="keywordflow">return</span> e; \
        } \
        gg_dcc_debug_data(<span class="stringliteral">&quot;read&quot;</span>, fd, buf, size); \
}
</pre></div>
<p>Definition at line <a class="el" href="dcc_8c_source.html#l00525">525</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa9b2e8d4a2519b209f0316552cc039ba"></a><!-- doxytag: member="dcc.c::gg_dcc_write" ref="aa9b2e8d4a2519b209f0316552cc039ba" args="(fd, buf, size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define gg_dcc_write</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fd, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">buf, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{ \
        <span class="keywordtype">int</span> tmp; \
        gg_dcc_debug_data(<span class="stringliteral">&quot;write&quot;</span>, fd, buf, size); \
        tmp = write(fd, buf, size); \
        <span class="keywordflow">if</span> (tmp &lt; (<span class="keywordtype">int</span>) size) { \
                <span class="keywordflow">if</span> (tmp == -1) { \
                        gg_debug(<a class="code" href="libgadu_8h.html#a40e449afb3f941037e1227afe28ddace">GG_DEBUG_MISC</a>, <span class="stringliteral">&quot;// gg_dcc_watch_fd() write() failed (errno=%d, %s)\n&quot;</span>, errno, strerror(errno)); \
                } <span class="keywordflow">else</span> { \
                        gg_debug(<a class="code" href="libgadu_8h.html#a40e449afb3f941037e1227afe28ddace">GG_DEBUG_MISC</a>, <span class="stringliteral">&quot;// gg_dcc_watch_fd() write() failed (%d needed, %d done)\n&quot;</span>, size, tmp); \
                } \
                e-&gt;type = <a class="code" href="libgadu_8h.html#a3dd02c0d2ff1d304d134f677faf66cfcaf5c56930008b944423b5ea3927520949">GG_EVENT_DCC_ERROR</a>; \
                e-&gt;event.dcc_error = <a class="code" href="libgadu_8h.html#a8a7800a03f87e95ca36303f0cdf0d163a82b70a0c369d12697a1e90072080ccf9">GG_ERROR_DCC_HANDSHAKE</a>; \
                <span class="keywordflow">return</span> e; \
        } \
}
</pre></div>
<p>Definition at line <a class="el" href="dcc_8c_source.html#l00551">551</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae3da65bbe7c3218cb2e502f021032b68"></a><!-- doxytag: member="dcc.c::gg_dcc_fill_file_info" ref="ae3da65bbe7c3218cb2e502f021032b68" args="(struct gg_dcc *d, const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_fill_file_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wypełnia pola struktury <code><a class="el" href="structgg__dcc.html">gg_dcc</a></code> niezbędne do wysłania pliku.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Większą funkcjonalność zapewnia funkcja <code><a class="el" href="dcc_8c.html#acb0489366604e61863ca167173f16076">gg_dcc_fill_file_info2()</a></code>.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>Struktura połączenia </td></tr>
    <tr><td class="paramname">filename</td><td>Nazwa pliku</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 jeśli się powiodło, -1 w przypadku błędu </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00139">139</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="acb0489366604e61863ca167173f16076"></a><!-- doxytag: member="dcc.c::gg_dcc_fill_file_info2" ref="acb0489366604e61863ca167173f16076" args="(struct gg_dcc *d, const char *filename, const char *local_filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_fill_file_info2 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>local_filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wypełnia pola struktury <code><a class="el" href="structgg__dcc.html">gg_dcc</a></code> niezbędne do wysłania pliku.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>Struktura połączenia </td></tr>
    <tr><td class="paramname">filename</td><td>Nazwa pliku zapisywana w strukturze </td></tr>
    <tr><td class="paramname">local_filename</td><td>Nazwa pliku w lokalnym systemie plików</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 jeśli się powiodło, -1 w przypadku błędu </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00155">155</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5d4489eadc5c531a60a9905894fda6b3"></a><!-- doxytag: member="dcc.c::gg_dcc_free" ref="a5d4489eadc5c531a60a9905894fda6b3" args="(struct gg_dcc *d)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gg_dcc_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Zwalnia zasoby używane przez połączenie bezpośrednie.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>Struktura połączenia </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l01323">1323</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab71b56ab1af27f6c9c45d03d43effea5"></a><!-- doxytag: member="dcc.c::gg_dcc_get_file" ref="ab71b56ab1af27f6c9c45d03d43effea5" args="(uint32_t ip, uint16_t port, uin_t my_uin, uin_t peer_uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_get_file </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>my_uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>peer_uin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rozpoczyna odbieranie pliku przez zwrotne połączenie bezpośrednie.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ip</td><td>Adres IP nadawcy </td></tr>
    <tr><td class="paramname">port</td><td>Port nadawcy </td></tr>
    <tr><td class="paramname">my_uin</td><td>Własny numer </td></tr>
    <tr><td class="paramname">peer_uin</td><td>Numer nadawcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00309">309</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2a4b4a2ad85a06ba5f2e9c451dc29b6f"></a><!-- doxytag: member="dcc.c::gg_dcc_request" ref="a2a4b4a2ad85a06ba5f2e9c451dc29b6f" args="(struct gg_session *sess, uin_t uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__session.html">gg_session</a> *&#160;</td>
          <td class="paramname"><em>sess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>uin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wysyła żądanie zwrotnego połączenia bezpośredniego.</p>
<p>Funkcję wykorzystuje się, jeśli nie ma możliwości połączenia się z odbiorcą pliku lub rozmowy głosowej. Po otrzymaniu żądania druga strona spróbuje nawiązać zwrotne połączenie bezpośrednie z nadawcą. <a class="el" href="dcc_8c.html#a2a4b4a2ad85a06ba5f2e9c451dc29b6f">gg_dcc_request()</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sess</td><td>Struktura sesji </td></tr>
    <tr><td class="paramname">uin</td><td>Numer odbiorcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Patrz <code><a class="el" href="libgadu_8c.html#a2c03e907a237f1de9a0e22b252e333c5">gg_send_message_ctcp()</a></code> </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00093">93</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9e87148a79e8efa4890be95860c425f4"></a><!-- doxytag: member="dcc.c::gg_dcc_send_file" ref="a9e87148a79e8efa4890be95860c425f4" args="(uint32_t ip, uint16_t port, uin_t my_uin, uin_t peer_uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_send_file </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>my_uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>peer_uin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rozpoczyna wysyłanie pliku.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ip</td><td>Adres IP odbiorcy </td></tr>
    <tr><td class="paramname">port</td><td>Port odbiorcy </td></tr>
    <tr><td class="paramname">my_uin</td><td>Własny numer </td></tr>
    <tr><td class="paramname">peer_uin</td><td>Numer odbiorcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00328">328</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2b05f4bc46937c62e0794af8b344d9b4"></a><!-- doxytag: member="dcc.c::gg_dcc_set_type" ref="a2b05f4bc46937c62e0794af8b344d9b4" args="(struct gg_dcc *d, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gg_dcc_set_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Ustawia typ przychodzącego połączenia bezpośredniego.</p>
<p>Funkcję należy wywołać po otrzymaniu zdarzenia <code>GG_EVENT_DCC_CALLBACK</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>Struktura połączenia </td></tr>
    <tr><td class="paramname">type</td><td>Rodzaj połączenia (<code>GG_SESSION_DCC_SEND</code> lub <code>GG_SESSION_DCC_VOICE</code>) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00365">365</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1f9f10d4d70adeed7e76423fc047c95e"></a><!-- doxytag: member="dcc.c::gg_dcc_socket_create" ref="a1f9f10d4d70adeed7e76423fc047c95e" args="(uin_t uin, uint16_t port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_socket_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Tworzy gniazdo nasłuchujące dla połączeń bezpośrednich.</p>
<p>Funkcja przywiązuje gniazdo do pierwszego wolnego portu TCP.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">uin</td><td>Własny numer </td></tr>
    <tr><td class="paramname">port</td><td>Preferowany port (jeśli równy 0 lub -1, próbuje się domyślnego)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00404">404</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a53ac68b8f631a7dff70ba75363a15b2e"></a><!-- doxytag: member="dcc.c::gg_dcc_voice_chat" ref="a53ac68b8f631a7dff70ba75363a15b2e" args="(uint32_t ip, uint16_t port, uin_t my_uin, uin_t peer_uin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__dcc.html">gg_dcc</a>* gg_dcc_voice_chat </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>my_uin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libgadu_8h.html#a33f630ba74294027f9bcda26ed49cdc8">uin_t</a>&#160;</td>
          <td class="paramname"><em>peer_uin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Rozpoczyna połączenie głosowe.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ip</td><td>Adres IP odbiorcy </td></tr>
    <tr><td class="paramname">port</td><td>Port odbiorcy </td></tr>
    <tr><td class="paramname">my_uin</td><td>Własny numer </td></tr>
    <tr><td class="paramname">peer_uin</td><td>Numer odbiorcy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura <code><a class="el" href="structgg__dcc.html">gg_dcc</a></code> lub <code>NULL</code> w przypadku błędu </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00347">347</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3ec32ead7968e434b54354fe457a8fe1"></a><!-- doxytag: member="dcc.c::gg_dcc_voice_send" ref="a3ec32ead7968e434b54354fe457a8fe1" args="(struct gg_dcc *d, char *buf, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gg_dcc_voice_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wysyła ramkę danych połączenia głosowego.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>Struktura połączenia </td></tr>
    <tr><td class="paramname">buf</td><td>Bufor z danymi </td></tr>
    <tr><td class="paramname">length</td><td>Długość bufora z danymi</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 jeśli się powiodło, -1 w przypadku błędu </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00485">485</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9804ea6dffcb077cd5f7a90d4120dc9b"></a><!-- doxytag: member="dcc.c::gg_dcc_watch_fd" ref="a9804ea6dffcb077cd5f7a90d4120dc9b" args="(struct gg_dcc *h)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgg__event.html">gg_event</a>* gg_dcc_watch_fd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structgg__dcc.html">gg_dcc</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Funkcja wywoływana po zaobserwowaniu zmian na deskryptorze połączenia.</p>
<p>Funkcja zwraca strukturę zdarzenia <code><a class="el" href="structgg__event.html">gg_event</a></code>. Jeśli rodzaj zdarzenia to <code>GG_EVENT_NONE</code>, nie wydarzyło się jeszcze nic wartego odnotowania. Strukturę zdarzenia należy zwolnić funkcja <code>gg_event_free</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>Struktura połączenia</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Struktura zdarzenia lub <code>NULL</code> jeśli wystąpił błąd </dd></dl>

<p>Definition at line <a class="el" href="dcc_8c_source.html#l00581">581</a> of file <a class="el" href="dcc_8c_source.html">dcc.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dcc_8c.html">dcc.c</a>      </li>
      <li class="footer">Generated on Sun Mar 24 2013 16:05:18 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
