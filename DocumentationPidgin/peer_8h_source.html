<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>protocols/oscar/peer.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('peer_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">protocols/oscar/peer.h</div>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Purple&#39;s oscar protocol plugin</span>
<a name="l00003"></a>00003 <span class="comment"> * This file is the legal property of its developers.</span>
<a name="l00004"></a>00004 <span class="comment"> * Please see the AUTHORS file distributed alongside this file.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
<a name="l00007"></a>00007 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00008"></a>00008 <span class="comment"> * License as published by the Free Software Foundation; either</span>
<a name="l00009"></a>00009 <span class="comment"> * version 2 of the License, or (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * This library is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00014"></a>00014 <span class="comment"> * Lesser General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00017"></a>00017 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
<a name="l00018"></a>00018 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02111-1301  USA</span>
<a name="l00019"></a>00019 <span class="comment">*/</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="comment">/*</span>
<a name="l00022"></a>00022 <span class="comment"> * OFT and ODC Services</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#ifndef _PEER_H_</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#define _PEER_H_</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="ft_8h.html">ft.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="network_8h.html">network.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="proxy_8h.html">proxy.h</a>&quot;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___checksum_data.html">_ChecksumData</a>          <a class="code" href="struct___checksum_data.html">ChecksumData</a>;
<a name="l00033"></a>00033 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___odc_frame.html">_OdcFrame</a>              <a class="code" href="struct___odc_frame.html">OdcFrame</a>;
<a name="l00034"></a>00034 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___oft_frame.html">_OftFrame</a>              <a class="code" href="struct___oft_frame.html">OftFrame</a>;
<a name="l00035"></a>00035 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___proxy_frame.html">_ProxyFrame</a>            <a class="code" href="struct___proxy_frame.html">ProxyFrame</a>;
<a name="l00036"></a>00036 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___peer_connection.html">_PeerConnection</a>        <a class="code" href="struct___peer_connection.html">PeerConnection</a>;
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#define PEER_CONNECTION_FLAG_INITIATED_BY_ME  0x0001</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define PEER_CONNECTION_FLAG_APPROVED         0x0002</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#define PEER_CONNECTION_FLAG_TRIED_DIRECT     0x0004</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#define PEER_CONNECTION_FLAG_TRIED_INCOMING   0x0008</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#define PEER_CONNECTION_FLAG_TRIED_PROXY      0x0010</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#define PEER_CONNECTION_FLAG_IS_INCOMING      0x0020</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="preprocessor">#define PEER_TYPE_PROMPT 0x0101 </span><span class="comment">/* &quot;I am going to send you this file, is that ok?&quot; */</span>
<a name="l00046"></a>00046 <span class="preprocessor">#define PEER_TYPE_RESUMEACCEPT 0x0106 </span><span class="comment">/* We are accepting the resume */</span>
<a name="l00047"></a>00047 <span class="preprocessor">#define PEER_TYPE_ACK 0x0202 </span><span class="comment">/* &quot;Yes, it is ok for you to send me that file&quot; */</span>
<a name="l00048"></a>00048 <span class="preprocessor">#define PEER_TYPE_DONE 0x0204 </span><span class="comment">/* &quot;I received that file with no problems&quot; or &quot;I already have that file, great!&quot; */</span>
<a name="l00049"></a>00049 <span class="preprocessor">#define PEER_TYPE_RESUME 0x0205 </span><span class="comment">/* Resume transferring, sent by whoever receives */</span>
<a name="l00050"></a>00050 <span class="preprocessor">#define PEER_TYPE_RESUMEACK 0x0207 </span><span class="comment">/* Our resume accept was ACKed */</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="preprocessor">#define PEER_TYPE_GETFILE_REQUESTLISTING 0x1108 </span><span class="comment">/* &quot;I have a listing.txt file, do you want it?&quot; */</span>
<a name="l00053"></a>00053 <span class="preprocessor">#define PEER_TYPE_GETFILE_RECEIVELISTING 0x1209 </span><span class="comment">/* &quot;Yes, please send me your listing.txt file&quot; */</span>
<a name="l00054"></a>00054 <span class="preprocessor">#define PEER_TYPE_GETFILE_RECEIVEDLISTING 0x120a </span><span class="comment">/* received corrupt listing.txt file? I&#39;m just guessing about this one... */</span>
<a name="l00055"></a>00055 <span class="preprocessor">#define PEER_TYPE_GETFILE_ACKLISTING 0x120b </span><span class="comment">/* &quot;I received the listing.txt file successfully&quot; */</span>
<a name="l00056"></a>00056 <span class="preprocessor">#define PEER_TYPE_GETFILE_REQUESTFILE 0x120c </span><span class="comment">/* &quot;Please send me this file&quot; */</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="comment">/*</span>
<a name="l00059"></a>00059 <span class="comment"> * For peer proxying</span>
<a name="l00060"></a>00060 <span class="comment"> */</span>
<a name="l00061"></a>00061 <span class="preprocessor">#define AIM_PEER_PROXY_SERVER         &quot;ars.oscar.aol.com&quot;</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#define ICQ_PEER_PROXY_SERVER         &quot;ars.icq.com&quot;</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#define PEER_PROXY_PORT           5190   </span><span class="comment">/* The port we should always connect to */</span>
<a name="l00064"></a>00064 <span class="preprocessor">#define PEER_PROXY_PACKET_VERSION 0x044a</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a>00066 <span class="comment">/* Thanks to Keith Lea and the Joust project for documenting these */</span>
<a name="l00067"></a>00067 <span class="preprocessor">#define PEER_PROXY_TYPE_ERROR   0x0001</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">#define PEER_PROXY_TYPE_CREATE  0x0002</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="preprocessor">#define PEER_PROXY_TYPE_CREATED 0x0003</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#define PEER_PROXY_TYPE_JOIN    0x0004</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#define PEER_PROXY_TYPE_READY   0x0005</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a><a class="code" href="struct___odc_frame.html">00073</a> <span class="keyword">struct </span><a class="code" href="struct___odc_frame.html">_OdcFrame</a>
<a name="l00074"></a>00074 {
<a name="l00075"></a>00075         <span class="comment">/* guchar magic[4]; */</span>        <span class="comment">/* 0 */</span>
<a name="l00076"></a>00076         <span class="comment">/* guint16 length; */</span>         <span class="comment">/* 4 */</span>
<a name="l00077"></a>00077         guint16 type;                 <span class="comment">/* 6 */</span>
<a name="l00078"></a>00078         guint16 subtype;              <span class="comment">/* 8 */</span>
<a name="l00079"></a>00079         <span class="comment">/* Unknown */</span>                 <span class="comment">/* 10 */</span>
<a name="l00080"></a>00080         guchar cookie[8];                     <span class="comment">/* 12 */</span>
<a name="l00081"></a>00081         <span class="comment">/* Unknown */</span>
<a name="l00082"></a>00082         <span class="comment">/* guint32 payloadlength; */</span>  <span class="comment">/* 28 */</span>
<a name="l00083"></a>00083         guint16 encoding;             <span class="comment">/* 32 */</span>
<a name="l00084"></a>00084         <span class="comment">/* Unknown */</span>
<a name="l00085"></a>00085         guint16 flags;                <span class="comment">/* 38 */</span>
<a name="l00086"></a>00086         <span class="comment">/* Unknown */</span>
<a name="l00087"></a>00087         guchar bn[32];                <span class="comment">/* 44 */</span>
<a name="l00088"></a>00088         <span class="comment">/* Unknown */</span>
<a name="l00089"></a>00089         <a class="code" href="struct___byte_stream.html">ByteStream</a> payload;           <span class="comment">/* 76 */</span>
<a name="l00090"></a>00090 };
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="struct___oft_frame.html">00092</a> <span class="keyword">struct </span><a class="code" href="struct___oft_frame.html">_OftFrame</a>
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094         <span class="comment">/* guchar magic[4]; */</span>   <span class="comment">/* 0 */</span>
<a name="l00095"></a>00095         <span class="comment">/* guint16 length; */</span>    <span class="comment">/* 4 */</span>
<a name="l00096"></a>00096         guint16 type;            <span class="comment">/* 6 */</span>
<a name="l00097"></a>00097         guchar cookie[8];        <span class="comment">/* 8 */</span>
<a name="l00098"></a>00098         guint16 encrypt;         <span class="comment">/* 16 */</span>
<a name="l00099"></a>00099         guint16 compress;        <span class="comment">/* 18 */</span>
<a name="l00100"></a>00100         guint16 totfiles;        <span class="comment">/* 20 */</span>
<a name="l00101"></a>00101         guint16 filesleft;       <span class="comment">/* 22 */</span>
<a name="l00102"></a>00102         guint16 totparts;        <span class="comment">/* 24 */</span>
<a name="l00103"></a>00103         guint16 partsleft;       <span class="comment">/* 26 */</span>
<a name="l00104"></a>00104         guint32 totsize;         <span class="comment">/* 28 */</span>
<a name="l00105"></a>00105         guint32 size;            <span class="comment">/* 32 */</span>
<a name="l00106"></a>00106         guint32 modtime;         <span class="comment">/* 36 */</span>
<a name="l00107"></a>00107         guint32 checksum;        <span class="comment">/* 40 */</span>
<a name="l00108"></a>00108         guint32 rfrcsum;         <span class="comment">/* 44 */</span>
<a name="l00109"></a>00109         guint32 rfsize;          <span class="comment">/* 48 */</span>
<a name="l00110"></a>00110         guint32 cretime;         <span class="comment">/* 52 */</span>
<a name="l00111"></a>00111         guint32 rfcsum;          <span class="comment">/* 56 */</span>
<a name="l00112"></a>00112         guint32 nrecvd;          <span class="comment">/* 60 */</span>
<a name="l00113"></a>00113         guint32 recvcsum;        <span class="comment">/* 64 */</span>
<a name="l00114"></a>00114         guchar idstring[32];     <span class="comment">/* 68 */</span>
<a name="l00115"></a>00115         guint8 flags;            <span class="comment">/* 100 */</span>
<a name="l00116"></a>00116         guint8 lnameoffset;      <span class="comment">/* 101 */</span>
<a name="l00117"></a>00117         guint8 lsizeoffset;      <span class="comment">/* 102 */</span>
<a name="l00118"></a>00118         guchar dummy[69];        <span class="comment">/* 103 */</span>
<a name="l00119"></a>00119         guchar macfileinfo[16];  <span class="comment">/* 172 */</span>
<a name="l00120"></a>00120         guint16 nencode;         <span class="comment">/* 188 */</span>
<a name="l00121"></a>00121         guint16 nlanguage;       <span class="comment">/* 190 */</span>
<a name="l00122"></a>00122         guchar *name;            <span class="comment">/* 192 */</span>
<a name="l00123"></a>00123         <span class="keywordtype">size_t</span> name_length;
<a name="l00124"></a>00124         <span class="comment">/* Payload? */</span>           <span class="comment">/* 256 */</span>
<a name="l00125"></a>00125 };
<a name="l00126"></a>00126 
<a name="l00127"></a><a class="code" href="struct___proxy_frame.html">00127</a> <span class="keyword">struct </span><a class="code" href="struct___proxy_frame.html">_ProxyFrame</a>
<a name="l00128"></a>00128 {
<a name="l00129"></a>00129         <span class="comment">/* guint16 length; */</span>    <span class="comment">/* 0 */</span>
<a name="l00130"></a>00130         guint16 version;         <span class="comment">/* 2 */</span>
<a name="l00131"></a>00131         guint16 type;            <span class="comment">/* 4 */</span>
<a name="l00132"></a>00132         guint32 unknown;         <span class="comment">/* 6 */</span>
<a name="l00133"></a>00133         guint16 flags;           <span class="comment">/* 10 */</span>
<a name="l00134"></a>00134         <a class="code" href="struct___byte_stream.html">ByteStream</a> payload;      <span class="comment">/* 12 */</span>
<a name="l00135"></a>00135 };
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="struct___peer_connection.html">00137</a> <span class="keyword">struct </span><a class="code" href="struct___peer_connection.html">_PeerConnection</a>
<a name="l00138"></a>00138 {
<a name="l00139"></a>00139         <a class="code" href="struct___oscar_data.html">OscarData</a> *od;
<a name="l00140"></a>00140         guint64 type;
<a name="l00141"></a>00141         <span class="keywordtype">char</span> *bn;
<a name="l00142"></a>00142         guchar magic[4];
<a name="l00143"></a>00143         guchar cookie[8];
<a name="l00144"></a>00144         guint16 lastrequestnumber;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         gboolean ready;
<a name="l00147"></a><a class="code" href="struct___peer_connection.html#a30f3a5b447814785ebe397363f3ecd0c">00147</a>         <span class="keywordtype">int</span> <a class="code" href="struct___peer_connection.html#a30f3a5b447814785ebe397363f3ecd0c">flags</a>;                       
<a name="l00148"></a><a class="code" href="struct___peer_connection.html#a01d72dcbdd2d2397b27878b0f685b46d">00148</a>         time_t <a class="code" href="struct___peer_connection.html#a01d72dcbdd2d2397b27878b0f685b46d">lastactivity</a>;             
<a name="l00149"></a>00149         guint destroy_timeout;
<a name="l00150"></a>00150         OscarDisconnectReason disconnect_reason;
<a name="l00151"></a>00151         <span class="keywordtype">char</span> *error_message;
<a name="l00152"></a>00152 
<a name="l00156"></a><a class="code" href="struct___peer_connection.html#af3c9dba010e96710cabbd544edd280e5">00156</a>         gpointer <a class="code" href="struct___peer_connection.html#af3c9dba010e96710cabbd544edd280e5">frame</a>;
<a name="l00157"></a>00157 
<a name="l00161"></a><a class="code" href="struct___peer_connection.html#a8aadd00e7f8dec75a1b80933565dd81e">00161</a>         <a class="code" href="struct___purple_proxy_connect_data.html">PurpleProxyConnectData</a> *<a class="code" href="struct___peer_connection.html#a8aadd00e7f8dec75a1b80933565dd81e">client_connect_data</a>;
<a name="l00162"></a>00162         <a class="code" href="struct___purple_proxy_connect_data.html">PurpleProxyConnectData</a> *verified_connect_data;
<a name="l00163"></a>00163 
<a name="l00167"></a><a class="code" href="struct___peer_connection.html#a41bf8fbf15a9a655ae6c7bbb736d53b3">00167</a>         <a class="code" href="struct___purple_network_listen_data.html">PurpleNetworkListenData</a> *<a class="code" href="struct___peer_connection.html#a41bf8fbf15a9a655ae6c7bbb736d53b3">listen_data</a>;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 
<a name="l00173"></a><a class="code" href="struct___peer_connection.html#ae39fb40f6f6c85cd8aabe58b1148f0b9">00173</a>         guint <a class="code" href="struct___peer_connection.html#ae39fb40f6f6c85cd8aabe58b1148f0b9">connect_timeout_timer</a>;
<a name="l00174"></a>00174 
<a name="l00179"></a><a class="code" href="struct___peer_connection.html#a39a1cbff6408b475afbdee794fc01b0c">00179</a>         <span class="keywordtype">int</span> <a class="code" href="struct___peer_connection.html#a39a1cbff6408b475afbdee794fc01b0c">listenerfd</a>;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181         <span class="keywordtype">int</span> fd;
<a name="l00182"></a>00182         guint8 header[6];
<a name="l00183"></a>00183         gssize header_received;
<a name="l00184"></a>00184         guint8 proxy_header[12];
<a name="l00185"></a>00185         gssize proxy_header_received;
<a name="l00186"></a>00186         <a class="code" href="struct___byte_stream.html">ByteStream</a> buffer_incoming;
<a name="l00187"></a>00187         <a class="code" href="struct___purple_circ_buffer.html">PurpleCircBuffer</a> *buffer_outgoing;
<a name="l00188"></a>00188         guint watcher_incoming;
<a name="l00189"></a>00189         guint watcher_outgoing;
<a name="l00190"></a>00190 
<a name="l00194"></a><a class="code" href="struct___peer_connection.html#ada97d287d2341ce6862b3f195adca867">00194</a>         gchar *<a class="code" href="struct___peer_connection.html#ada97d287d2341ce6862b3f195adca867">proxyip</a>;
<a name="l00195"></a>00195 
<a name="l00199"></a><a class="code" href="struct___peer_connection.html#a9278bb01a7c126c981b3d5348564870e">00199</a>         gchar *<a class="code" href="struct___peer_connection.html#a9278bb01a7c126c981b3d5348564870e">clientip</a>;
<a name="l00200"></a>00200 
<a name="l00205"></a><a class="code" href="struct___peer_connection.html#adf230e347aa93a81807c3784f2a12f36">00205</a>         gchar *<a class="code" href="struct___peer_connection.html#adf230e347aa93a81807c3784f2a12f36">verifiedip</a>;
<a name="l00206"></a>00206 
<a name="l00207"></a>00207         guint16 port;
<a name="l00208"></a>00208         gboolean use_proxy;
<a name="l00209"></a>00209 
<a name="l00213"></a><a class="code" href="struct___peer_connection.html#ae3e308ff98cc9e873aa34b8338d80d81">00213</a>         <a class="code" href="struct___checksum_data.html">ChecksumData</a> *<a class="code" href="struct___peer_connection.html#ae3e308ff98cc9e873aa34b8338d80d81">checksum_data</a>;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215         <span class="comment">/* TODOFT */</span>
<a name="l00216"></a>00216         <a class="code" href="struct___purple_xfer.html">PurpleXfer</a> *xfer;
<a name="l00217"></a>00217         <a class="code" href="struct___oft_frame.html">OftFrame</a> xferdata;
<a name="l00218"></a>00218         guint sending_data_timer;
<a name="l00219"></a>00219 };
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 <span class="comment">/*</span>
<a name="l00222"></a>00222 <span class="comment"> * For all peer connections</span>
<a name="l00223"></a>00223 <span class="comment"> */</span>
<a name="l00224"></a>00224 
<a name="l00232"></a>00232 <a class="code" href="struct___peer_connection.html">PeerConnection</a> *peer_connection_new(<a class="code" href="struct___oscar_data.html">OscarData</a> *od, guint64 type, <span class="keyword">const</span> <span class="keywordtype">char</span> *bn);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 <span class="keywordtype">void</span> peer_connection_destroy(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn, OscarDisconnectReason reason, <span class="keyword">const</span> gchar *error_message);
<a name="l00235"></a>00235 <span class="keywordtype">void</span> peer_connection_schedule_destroy(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn, OscarDisconnectReason reason, <span class="keyword">const</span> gchar *error_message);
<a name="l00236"></a>00236 <a class="code" href="struct___peer_connection.html">PeerConnection</a> *peer_connection_find_by_type(<a class="code" href="struct___oscar_data.html">OscarData</a> *od, <span class="keyword">const</span> <span class="keywordtype">char</span> *bn, guint64 type);
<a name="l00237"></a>00237 <a class="code" href="struct___peer_connection.html">PeerConnection</a> *peer_connection_find_by_cookie(<a class="code" href="struct___oscar_data.html">OscarData</a> *od, <span class="keyword">const</span> <span class="keywordtype">char</span> *bn, <span class="keyword">const</span> guchar *cookie);
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 <span class="keywordtype">void</span> peer_connection_listen_cb(gpointer data, gint source, <a class="code" href="eventloop_8h.html#ae16a4b18f1da57dff1eb139e934fffb3">PurpleInputCondition</a> cond);
<a name="l00240"></a>00240 <span class="keywordtype">void</span> peer_connection_recv_cb(gpointer data, gint source, <a class="code" href="eventloop_8h.html#ae16a4b18f1da57dff1eb139e934fffb3">PurpleInputCondition</a> cond);
<a name="l00241"></a>00241 <span class="keywordtype">void</span> peer_connection_send(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn, <a class="code" href="struct___byte_stream.html">ByteStream</a> *bs);
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="keywordtype">void</span> peer_connection_trynext(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn);
<a name="l00244"></a>00244 <span class="keywordtype">void</span> peer_connection_finalize_connection(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn);
<a name="l00245"></a>00245 <span class="keywordtype">void</span> peer_connection_propose(<a class="code" href="struct___oscar_data.html">OscarData</a> *od, guint64 type, <span class="keyword">const</span> <span class="keywordtype">char</span> *bn);
<a name="l00246"></a>00246 <span class="keywordtype">void</span> peer_connection_got_proposition(<a class="code" href="struct___oscar_data.html">OscarData</a> *od, <span class="keyword">const</span> gchar *bn, <span class="keyword">const</span> gchar *message, <a class="code" href="struct___icbm_args_ch2.html">IcbmArgsCh2</a> *args);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 <span class="comment">/*</span>
<a name="l00249"></a>00249 <span class="comment"> * For ODC</span>
<a name="l00250"></a>00250 <span class="comment"> */</span>
<a name="l00251"></a>00251 <span class="keywordtype">void</span> peer_odc_close(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn);
<a name="l00252"></a>00252 <span class="keywordtype">void</span> peer_odc_recv_frame(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn, <a class="code" href="struct___byte_stream.html">ByteStream</a> *bs);
<a name="l00253"></a>00253 <span class="keywordtype">void</span> peer_odc_send_cookie(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn);
<a name="l00254"></a>00254 <span class="keywordtype">void</span> peer_odc_send_typing(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn, <a class="code" href="conversation_8h.html#a044cde1e74c50154fefcd358c723850a">PurpleTypingState</a> typing);
<a name="l00255"></a>00255 <span class="keywordtype">void</span> peer_odc_send_im(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> encoding, gboolean autoreply);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 <span class="comment">/*</span>
<a name="l00258"></a>00258 <span class="comment"> * For OFT</span>
<a name="l00259"></a>00259 <span class="comment"> */</span>
<a name="l00260"></a>00260 <span class="keywordtype">void</span> peer_oft_close(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn);
<a name="l00261"></a>00261 <span class="keywordtype">void</span> peer_oft_recv_frame(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn, <a class="code" href="struct___byte_stream.html">ByteStream</a> *bs);
<a name="l00262"></a>00262 <span class="keywordtype">void</span> peer_oft_send_prompt(<a class="code" href="struct___peer_connection.html">PeerConnection</a> *conn);
<a name="l00263"></a>00263 <span class="keywordtype">void</span> peer_oft_checksum_destroy(<a class="code" href="struct___checksum_data.html">ChecksumData</a> *checksum_data);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 <span class="comment">/* Xfer callbacks for receiving a file */</span>
<a name="l00266"></a>00266 <span class="keywordtype">void</span> peer_oft_recvcb_init(<a class="code" href="struct___purple_xfer.html">PurpleXfer</a> *xfer);
<a name="l00267"></a>00267 <span class="keywordtype">void</span> peer_oft_recvcb_end(<a class="code" href="struct___purple_xfer.html">PurpleXfer</a> *xfer);
<a name="l00268"></a>00268 <span class="keywordtype">void</span> peer_oft_recvcb_ack_recv(<a class="code" href="struct___purple_xfer.html">PurpleXfer</a> *xfer, <span class="keyword">const</span> guchar *buffer, <span class="keywordtype">size_t</span> size);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="comment">/* Xfer callbacks for sending a file */</span>
<a name="l00271"></a>00271 <span class="keywordtype">void</span> peer_oft_sendcb_init(<a class="code" href="struct___purple_xfer.html">PurpleXfer</a> *xfer);
<a name="l00272"></a>00272 <span class="keywordtype">void</span> peer_oft_sendcb_ack(<a class="code" href="struct___purple_xfer.html">PurpleXfer</a> *xfer, <span class="keyword">const</span> guchar *buffer, <span class="keywordtype">size_t</span> size);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="comment">/* Xfer callbacks for both sending and receiving */</span>
<a name="l00275"></a>00275 <span class="keywordtype">void</span> peer_oft_cb_generic_cancel(<a class="code" href="struct___purple_xfer.html">PurpleXfer</a> *xfer);
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 <span class="comment">/*</span>
<a name="l00278"></a>00278 <span class="comment"> * For peer proxying</span>
<a name="l00279"></a>00279 <span class="comment"> */</span>
<a name="l00280"></a>00280 <span class="keywordtype">void</span> peer_proxy_connection_established_cb(gpointer data, gint source, <span class="keyword">const</span> gchar *error_message);
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 <span class="preprocessor">#endif </span><span class="comment">/* _PEER_H_ */</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>peer.h</b>      </li>
      <li class="footer">Generated on Sun Mar 24 2013 16:05:15 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
