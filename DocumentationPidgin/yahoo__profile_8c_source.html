<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>protocols/yahoo/yahoo_profile.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('yahoo__profile_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">protocols/yahoo/yahoo_profile.c</div>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * purple</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Purple is the legal property of its developers, whose names are too numerous</span>
<a name="l00005"></a>00005 <span class="comment"> * to list here.  Please refer to the COPYRIGHT file distributed with this</span>
<a name="l00006"></a>00006 <span class="comment"> * source distribution.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00009"></a>00009 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00010"></a>00010 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00011"></a>00011 <span class="comment"> * (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00016"></a>00016 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00019"></a>00019 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02111-1301  USA</span>
<a name="l00021"></a>00021 <span class="comment"> *</span>
<a name="l00022"></a>00022 <span class="comment"> */</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#define PHOTO_SUPPORT 1</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;internal.h&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="notify_8h.html">notify.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#if PHOTO_SUPPORT</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="imgstore_8h.html">imgstore.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#endif </span><span class="comment">/* PHOTO_SUPPORT */</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="libymsg_8h.html">libymsg.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="yahoo__friend_8h.html">yahoo_friend.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="struct_yahoo_get_info_data.html">00037</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00038"></a>00038         <a class="code" href="struct___purple_connection.html">PurpleConnection</a> *gc;
<a name="l00039"></a>00039         <span class="keywordtype">char</span> *name;
<a name="l00040"></a>00040 } <a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a>;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="keyword">typedef</span> <span class="keyword">enum</span> profile_lang_id {
<a name="l00043"></a>00043         XX, DA, DE, EL,
<a name="l00044"></a>00044         EN, EN_GB,
<a name="l00045"></a>00045         ES_AR, ES_ES, ES_MX, ES_US,
<a name="l00046"></a>00046         FR_CA, FR_FR,
<a name="l00047"></a>00047         IT, JA, KO, NO, PT, SV,
<a name="l00048"></a>00048         ZH_CN, ZH_HK, ZH_TW, ZH_US, PT_BR
<a name="l00049"></a>00049 } profile_lang_id_t;
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="structprofile__lang__node.html">00051</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structprofile__lang__node.html">profile_lang_node</a> {
<a name="l00052"></a>00052         profile_lang_id_t lang;
<a name="l00053"></a>00053         <span class="keywordtype">char</span> *last_updated_string;
<a name="l00054"></a>00054         <span class="keywordtype">char</span> *det;
<a name="l00055"></a>00055 } <a class="code" href="structprofile__lang__node.html">profile_lang_node_t</a>;
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="structprofile__strings__node.html">00057</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structprofile__strings__node.html">profile_strings_node</a> {
<a name="l00058"></a>00058         profile_lang_id_t lang;
<a name="l00059"></a>00059         <span class="keywordtype">char</span> *lang_string;                   <span class="comment">/* Only to make debugging output saner */</span>
<a name="l00060"></a>00060         <span class="keywordtype">char</span> *charset;
<a name="l00061"></a>00061         <span class="keywordtype">char</span> *yahoo_id_string;
<a name="l00062"></a>00062         <span class="keywordtype">char</span> *private_string;
<a name="l00063"></a>00063         <span class="keywordtype">char</span> *no_answer_string;
<a name="l00064"></a>00064         <span class="keywordtype">char</span> *my_email_string;
<a name="l00065"></a>00065         <span class="keywordtype">char</span> *realname_string;
<a name="l00066"></a>00066         <span class="keywordtype">char</span> *location_string;
<a name="l00067"></a>00067         <span class="keywordtype">char</span> *age_string;
<a name="l00068"></a>00068         <span class="keywordtype">char</span> *maritalstatus_string;
<a name="l00069"></a>00069         <span class="keywordtype">char</span> *gender_string;
<a name="l00070"></a>00070         <span class="keywordtype">char</span> *occupation_string;
<a name="l00071"></a>00071         <span class="keywordtype">char</span> *hobbies_string;
<a name="l00072"></a>00072         <span class="keywordtype">char</span> *latest_news_string;
<a name="l00073"></a>00073         <span class="keywordtype">char</span> *favorite_quote_string;
<a name="l00074"></a>00074         <span class="keywordtype">char</span> *links_string;
<a name="l00075"></a>00075         <span class="keywordtype">char</span> *no_home_page_specified_string;
<a name="l00076"></a>00076         <span class="keywordtype">char</span> *home_page_string;
<a name="l00077"></a>00077         <span class="keywordtype">char</span> *no_cool_link_specified_string;
<a name="l00078"></a>00078         <span class="keywordtype">char</span> *cool_link_1_string;
<a name="l00079"></a>00079         <span class="keywordtype">char</span> *cool_link_2_string;
<a name="l00080"></a>00080         <span class="keywordtype">char</span> *cool_link_3_string;
<a name="l00081"></a>00081         <span class="keywordtype">char</span> *dummy;
<a name="l00082"></a>00082 } <a class="code" href="structprofile__strings__node.html">profile_strings_node_t</a>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="keyword">typedef</span> <span class="keyword">enum</span> profile_state {
<a name="l00085"></a>00085         PROFILE_STATE_DEFAULT,
<a name="l00086"></a>00086         PROFILE_STATE_NOT_FOUND,
<a name="l00087"></a>00087         PROFILE_STATE_UNKNOWN_LANGUAGE
<a name="l00088"></a>00088 } profile_state_t;
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="struct_yahoo_get_info_step_two_data.html">00090</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00091"></a>00091         <a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a> *info_data;
<a name="l00092"></a>00092         <a class="code" href="struct___purple_notify_user_info.html">PurpleNotifyUserInfo</a> *user_info;
<a name="l00093"></a>00093         <span class="keywordtype">char</span> *url_buffer;
<a name="l00094"></a>00094         <span class="keywordtype">char</span> *photo_url_text;
<a name="l00095"></a>00095         <span class="keywordtype">char</span> *profile_url_text;
<a name="l00096"></a>00096         <span class="keyword">const</span> <a class="code" href="structprofile__strings__node.html">profile_strings_node_t</a> *strings;
<a name="l00097"></a>00097         <span class="keyword">const</span> <span class="keywordtype">char</span> *last_updated_string;
<a name="l00098"></a>00098         <span class="keyword">const</span> <span class="keywordtype">char</span> *title;
<a name="l00099"></a>00099         profile_state_t profile_state;
<a name="l00100"></a>00100 } <a class="code" href="struct_yahoo_get_info_step_two_data.html">YahooGetInfoStepTwoData</a>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">/* Strings to determine the profile &quot;language&quot; (more accurately &quot;locale&quot;).</span>
<a name="l00103"></a>00103 <span class="comment"> * Strings in this list must be in the original charset in the profile.</span>
<a name="l00104"></a>00104 <span class="comment"> * The &quot;Last Updated&quot; string is used, but sometimes is not sufficient to</span>
<a name="l00105"></a>00105 <span class="comment"> * distinguish 2 locales with this (e.g., ES_ES from ES_US, or FR_CA from</span>
<a name="l00106"></a>00106 <span class="comment"> * FR_FR, or EL from EN_GB), in which case a second string is added and</span>
<a name="l00107"></a>00107 <span class="comment"> * such special cases must be placed before the more general case.</span>
<a name="l00108"></a>00108 <span class="comment"> */</span>
<a name="l00109"></a>00109 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structprofile__lang__node.html">profile_lang_node_t</a> profile_langs[] = {
<a name="l00110"></a>00110         { DA,    <span class="stringliteral">&quot;Opdateret sidste gang&amp;nbsp;&quot;</span>,                          NULL },
<a name="l00111"></a>00111         { DE,    <span class="stringliteral">&quot;Letzter Update&amp;nbsp;&quot;</span>,                                 NULL },
<a name="l00112"></a>00112         { EL,    <span class="stringliteral">&quot;Last Updated:&quot;</span>,              <span class="stringliteral">&quot;http://gr.profiles.yahoo.com&quot;</span> },
<a name="l00113"></a>00113         { EN_GB, <span class="stringliteral">&quot;Last Update&amp;nbsp;&quot;</span>,                      <span class="stringliteral">&quot;Favourite Quote&quot;</span> },
<a name="l00114"></a>00114         { EN,    <span class="stringliteral">&quot;Last Update:&quot;</span>,                                        NULL },
<a name="l00115"></a>00115         { EN,    <span class="stringliteral">&quot;Last Update&amp;nbsp;&quot;</span>,                                   NULL },
<a name="l00116"></a>00116         { ES_AR, <span class="stringliteral">&quot;\332ltima actualizaci\363n&amp;nbsp;&quot;</span>,                     NULL },
<a name="l00117"></a>00117         { ES_ES, <span class="stringliteral">&quot;Actualizada el&amp;nbsp;&quot;</span>,       <span class="stringliteral">&quot;http://es.profiles.yahoo.com&quot;</span> },
<a name="l00118"></a>00118         { ES_MX, <span class="stringliteral">&quot;Actualizada el &amp;nbsp;&quot;</span>,      <span class="stringliteral">&quot;http://mx.profiles.yahoo.com&quot;</span> },
<a name="l00119"></a>00119         { ES_US, <span class="stringliteral">&quot;Actualizada el &amp;nbsp;&quot;</span>,                                NULL },
<a name="l00120"></a>00120         { FR_CA, <span class="stringliteral">&quot;Derni\xe8re mise \xe0 jour&quot;</span>, <span class="stringliteral">&quot;http://cf.profiles.yahoo.com&quot;</span> },
<a name="l00121"></a>00121         { FR_FR, <span class="stringliteral">&quot;Derni\xe8re mise \xe0 jour&quot;</span>,                           NULL },
<a name="l00122"></a>00122         { IT,    <span class="stringliteral">&quot;Ultimo aggiornamento:&quot;</span>,                                NULL },
<a name="l00123"></a>00123         { JA,    <span class="stringliteral">&quot;\xba\xc7\xbd\xaa\xb9\xb9\xbf\xb7\xc6\xfc\xa1\xa7&quot;</span>,     NULL },
<a name="l00124"></a>00124         { KO,    <span class="stringliteral">&quot;\xb0\xbb\xbd\xc5\x20\xb3\xaf\xc2\xa5&amp;nbsp;&quot;</span>,           NULL },
<a name="l00125"></a>00125         { NO,    <span class="stringliteral">&quot;Sist oppdatert&amp;nbsp;&quot;</span>,                                 NULL },
<a name="l00126"></a>00126         { PT,    <span class="stringliteral">&quot;\332ltima atualiza\347\343o&amp;nbsp;&quot;</span>,                    NULL },
<a name="l00127"></a>00127         { PT_BR, <span class="stringliteral">&quot;\332ltima atualiza\347\343o:&quot;</span>,                         NULL },
<a name="l00128"></a>00128         { SV,    <span class="stringliteral">&quot;Senast uppdaterad&amp;nbsp;&quot;</span>,                              NULL },
<a name="l00129"></a>00129         { ZH_CN, <span class="stringliteral">&quot;\xd7\xee\xba\xf3\xd0\xde\xb8\xc4\xc8\xd5\xc6\xda&quot;</span>,     NULL },
<a name="l00130"></a>00130         { ZH_HK, <span class="stringliteral">&quot;\xb3\xcc\xaa\xf1\xa7\xf3\xb7\x73\xae\xc9\xb6\xa1&quot;</span>,     NULL },
<a name="l00131"></a>00131         { ZH_US, <span class="stringliteral">&quot;\xb3\xcc\xab\xe1\xad\xd7\xa7\xef\xa4\xe9\xb4\xc1&quot;</span>, <span class="stringliteral">&quot;http://chinese.profiles.yahoo.com&quot;</span> },
<a name="l00132"></a>00132         { ZH_TW, <span class="stringliteral">&quot;\xb3\xcc\xab\xe1\xad\xd7\xa7\xef\xa4\xe9\xb4\xc1&quot;</span>,     NULL },
<a name="l00133"></a>00133         { XX,     NULL,                                                  NULL }
<a name="l00134"></a>00134 };
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="comment">/* Strings in this list must be in UTF-8; &amp;nbsp;&#39;s should be specified as spaces. */</span>
<a name="l00137"></a>00137 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structprofile__strings__node.html">profile_strings_node_t</a> profile_strings[] = {
<a name="l00138"></a>00138         { DA, <span class="stringliteral">&quot;da&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00139"></a>00139                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00140"></a>00140                 <span class="stringliteral">&quot;Privat&quot;</span>,
<a name="l00141"></a>00141                 <span class="stringliteral">&quot;Intet svar&quot;</span>,
<a name="l00142"></a>00142                 <span class="stringliteral">&quot;Min Email&quot;</span>,
<a name="l00143"></a>00143                 <span class="stringliteral">&quot;Rigtige navn:&quot;</span>,
<a name="l00144"></a>00144                 <span class="stringliteral">&quot;Opholdssted:&quot;</span>,
<a name="l00145"></a>00145                 <span class="stringliteral">&quot;Alder:&quot;</span>,
<a name="l00146"></a>00146                 <span class="stringliteral">&quot;Ægteskabelig status:&quot;</span>,
<a name="l00147"></a>00147                 <span class="stringliteral">&quot;Køn:&quot;</span>,
<a name="l00148"></a>00148                 <span class="stringliteral">&quot;Erhverv:&quot;</span>,
<a name="l00149"></a>00149                 <span class="stringliteral">&quot;Hobbyer:&quot;</span>,
<a name="l00150"></a>00150                 <span class="stringliteral">&quot;Sidste nyt:&quot;</span>,
<a name="l00151"></a>00151                 <span class="stringliteral">&quot;Favoritcitat&quot;</span>,
<a name="l00152"></a>00152                 <span class="stringliteral">&quot;Links&quot;</span>,
<a name="l00153"></a>00153                 <span class="stringliteral">&quot;Ingen hjemmeside specificeret&quot;</span>,
<a name="l00154"></a>00154                 <span class="stringliteral">&quot;Forside:&quot;</span>,
<a name="l00155"></a>00155                 <span class="stringliteral">&quot;Intet cool link specificeret&quot;</span>,
<a name="l00156"></a>00156                 <span class="stringliteral">&quot;Cool link 1:&quot;</span>,
<a name="l00157"></a>00157                 <span class="stringliteral">&quot;Cool link 2:&quot;</span>,
<a name="l00158"></a>00158                 <span class="stringliteral">&quot;Cool link 3:&quot;</span>,
<a name="l00159"></a>00159                 NULL
<a name="l00160"></a>00160         },
<a name="l00161"></a>00161         { DE, <span class="stringliteral">&quot;de&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00162"></a>00162                 <span class="stringliteral">&quot;Yahoo!-ID:&quot;</span>,
<a name="l00163"></a>00163                 <span class="stringliteral">&quot;Privat&quot;</span>,
<a name="l00164"></a>00164                 <span class="stringliteral">&quot;Keine Antwort&quot;</span>,
<a name="l00165"></a>00165                 <span class="stringliteral">&quot;Meine E-Mail&quot;</span>,
<a name="l00166"></a>00166                 <span class="stringliteral">&quot;Realer Name:&quot;</span>,
<a name="l00167"></a>00167                 <span class="stringliteral">&quot;Ort:&quot;</span>,
<a name="l00168"></a>00168                 <span class="stringliteral">&quot;Alter:&quot;</span>,
<a name="l00169"></a>00169                 <span class="stringliteral">&quot;Familienstand:&quot;</span>,
<a name="l00170"></a>00170                 <span class="stringliteral">&quot;Geschlecht:&quot;</span>,
<a name="l00171"></a>00171                 <span class="stringliteral">&quot;Beruf:&quot;</span>,
<a name="l00172"></a>00172                 <span class="stringliteral">&quot;Hobbys:&quot;</span>,
<a name="l00173"></a>00173                 <span class="stringliteral">&quot;Neuste Nachrichten:&quot;</span>,
<a name="l00174"></a>00174                 <span class="stringliteral">&quot;Mein Lieblingsspruch&quot;</span>,
<a name="l00175"></a>00175                 <span class="stringliteral">&quot;Links&quot;</span>,
<a name="l00176"></a>00176                 <span class="stringliteral">&quot;Keine Homepage angegeben&quot;</span>,
<a name="l00177"></a>00177                 <span class="stringliteral">&quot;Homepage:&quot;</span>,
<a name="l00178"></a>00178                 <span class="stringliteral">&quot;Keinen coolen Link angegeben&quot;</span>,
<a name="l00179"></a>00179                 <span class="stringliteral">&quot;Cooler Link 1:&quot;</span>,
<a name="l00180"></a>00180                 <span class="stringliteral">&quot;Cooler Link 2:&quot;</span>,
<a name="l00181"></a>00181                 <span class="stringliteral">&quot;Cooler Link 3:&quot;</span>,
<a name="l00182"></a>00182                 NULL
<a name="l00183"></a>00183         },
<a name="l00184"></a>00184         { EL, <span class="stringliteral">&quot;el&quot;</span>, <span class="stringliteral">&quot;ISO-8859-7&quot;</span>, <span class="comment">/* EL is identical to EN, except no_answer_string */</span>
<a name="l00185"></a>00185                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00186"></a>00186                 <span class="stringliteral">&quot;Private&quot;</span>,
<a name="l00187"></a>00187                 <span class="stringliteral">&quot;Καμία απάντηση&quot;</span>,
<a name="l00188"></a>00188                 <span class="stringliteral">&quot;My Email&quot;</span>,
<a name="l00189"></a>00189                 <span class="stringliteral">&quot;Real Name:&quot;</span>,
<a name="l00190"></a>00190                 <span class="stringliteral">&quot;Location:&quot;</span>,
<a name="l00191"></a>00191                 <span class="stringliteral">&quot;Age:&quot;</span>,
<a name="l00192"></a>00192                 <span class="stringliteral">&quot;Marital Status:&quot;</span>,
<a name="l00193"></a>00193                 <span class="stringliteral">&quot;Gender:&quot;</span>,
<a name="l00194"></a>00194                 <span class="stringliteral">&quot;Occupation:&quot;</span>,
<a name="l00195"></a>00195                 <span class="stringliteral">&quot;Hobbies:&quot;</span>,
<a name="l00196"></a>00196                 <span class="stringliteral">&quot;Latest News&quot;</span>,
<a name="l00197"></a>00197                 <span class="stringliteral">&quot;Favorite Quote&quot;</span>,
<a name="l00198"></a>00198                 <span class="stringliteral">&quot;Links&quot;</span>,
<a name="l00199"></a>00199                 <span class="stringliteral">&quot;No home page specified&quot;</span>,
<a name="l00200"></a>00200                 <span class="stringliteral">&quot;Home Page:&quot;</span>,
<a name="l00201"></a>00201                 <span class="stringliteral">&quot;No cool link specified&quot;</span>,
<a name="l00202"></a>00202                 <span class="stringliteral">&quot;Cool Link 1:&quot;</span>,
<a name="l00203"></a>00203                 <span class="stringliteral">&quot;Cool Link 2:&quot;</span>,
<a name="l00204"></a>00204                 <span class="stringliteral">&quot;Cool Link 3:&quot;</span>,
<a name="l00205"></a>00205                 NULL
<a name="l00206"></a>00206         },
<a name="l00207"></a>00207         { EN, <span class="stringliteral">&quot;en&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00208"></a>00208                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00209"></a>00209                 <span class="stringliteral">&quot;Private&quot;</span>,
<a name="l00210"></a>00210                 <span class="stringliteral">&quot;No Answer&quot;</span>,
<a name="l00211"></a>00211                 <span class="stringliteral">&quot;My Email:&quot;</span>,
<a name="l00212"></a>00212                 <span class="stringliteral">&quot;Real Name:&quot;</span>,
<a name="l00213"></a>00213                 <span class="stringliteral">&quot;Location:&quot;</span>,
<a name="l00214"></a>00214                 <span class="stringliteral">&quot;Age:&quot;</span>,
<a name="l00215"></a>00215                 <span class="stringliteral">&quot;Marital Status:&quot;</span>,
<a name="l00216"></a>00216                 <span class="stringliteral">&quot;Sex:&quot;</span>,
<a name="l00217"></a>00217                 <span class="stringliteral">&quot;Occupation:&quot;</span>,
<a name="l00218"></a>00218                 <span class="stringliteral">&quot;Hobbies&quot;</span>,
<a name="l00219"></a>00219                 <span class="stringliteral">&quot;Latest News&quot;</span>,
<a name="l00220"></a>00220                 <span class="stringliteral">&quot;Favorite Quote&quot;</span>,
<a name="l00221"></a>00221                 <span class="stringliteral">&quot;Links&quot;</span>,
<a name="l00222"></a>00222                 <span class="stringliteral">&quot;No home page specified&quot;</span>,
<a name="l00223"></a>00223                 <span class="stringliteral">&quot;Home Page:&quot;</span>,
<a name="l00224"></a>00224                 <span class="stringliteral">&quot;No cool link specified&quot;</span>,
<a name="l00225"></a>00225                 <span class="stringliteral">&quot;Cool Link 1&quot;</span>,
<a name="l00226"></a>00226                 <span class="stringliteral">&quot;Cool Link 2&quot;</span>,
<a name="l00227"></a>00227                 <span class="stringliteral">&quot;Cool Link 3&quot;</span>,
<a name="l00228"></a>00228                 NULL
<a name="l00229"></a>00229         },
<a name="l00230"></a>00230         { EN_GB, <span class="stringliteral">&quot;en_GB&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>, <span class="comment">/* Same as EN except spelling of &quot;Favourite&quot; */</span>
<a name="l00231"></a>00231                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00232"></a>00232                 <span class="stringliteral">&quot;Private&quot;</span>,
<a name="l00233"></a>00233                 <span class="stringliteral">&quot;No Answer&quot;</span>,
<a name="l00234"></a>00234                 <span class="stringliteral">&quot;My Email:&quot;</span>,
<a name="l00235"></a>00235                 <span class="stringliteral">&quot;Real Name:&quot;</span>,
<a name="l00236"></a>00236                 <span class="stringliteral">&quot;Location:&quot;</span>,
<a name="l00237"></a>00237                 <span class="stringliteral">&quot;Age:&quot;</span>,
<a name="l00238"></a>00238                 <span class="stringliteral">&quot;Marital Status:&quot;</span>,
<a name="l00239"></a>00239                 <span class="stringliteral">&quot;Sex:&quot;</span>,
<a name="l00240"></a>00240                 <span class="stringliteral">&quot;Occupation:&quot;</span>,
<a name="l00241"></a>00241                 <span class="stringliteral">&quot;Hobbies&quot;</span>,
<a name="l00242"></a>00242                 <span class="stringliteral">&quot;Latest News&quot;</span>,
<a name="l00243"></a>00243                 <span class="stringliteral">&quot;Favourite Quote&quot;</span>,
<a name="l00244"></a>00244                 <span class="stringliteral">&quot;Links&quot;</span>,
<a name="l00245"></a>00245                 <span class="stringliteral">&quot;No home page specified&quot;</span>,
<a name="l00246"></a>00246                 <span class="stringliteral">&quot;Home Page:&quot;</span>,
<a name="l00247"></a>00247                 <span class="stringliteral">&quot;No cool link specified&quot;</span>,
<a name="l00248"></a>00248                 <span class="stringliteral">&quot;Cool Link 1&quot;</span>,
<a name="l00249"></a>00249                 <span class="stringliteral">&quot;Cool Link 2&quot;</span>,
<a name="l00250"></a>00250                 <span class="stringliteral">&quot;Cool Link 3&quot;</span>,
<a name="l00251"></a>00251                 NULL
<a name="l00252"></a>00252         },
<a name="l00253"></a>00253         { ES_AR, <span class="stringliteral">&quot;es_AR&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00254"></a>00254                 <span class="stringliteral">&quot;Usuario de Yahoo!:&quot;</span>,
<a name="l00255"></a>00255                 <span class="stringliteral">&quot;Privado&quot;</span>,
<a name="l00256"></a>00256                 <span class="stringliteral">&quot;No introdujiste una respuesta&quot;</span>,
<a name="l00257"></a>00257                 <span class="stringliteral">&quot;Mi dirección de correo electrónico&quot;</span>,
<a name="l00258"></a>00258                 <span class="stringliteral">&quot;Nombre real:&quot;</span>,
<a name="l00259"></a>00259                 <span class="stringliteral">&quot;Ubicación:&quot;</span>,
<a name="l00260"></a>00260                 <span class="stringliteral">&quot;Edad:&quot;</span>,
<a name="l00261"></a>00261                 <span class="stringliteral">&quot;Estado civil:&quot;</span>,
<a name="l00262"></a>00262                 <span class="stringliteral">&quot;Sexo:&quot;</span>,
<a name="l00263"></a>00263                 <span class="stringliteral">&quot;Ocupación:&quot;</span>,
<a name="l00264"></a>00264                 <span class="stringliteral">&quot;Pasatiempos:&quot;</span>,
<a name="l00265"></a>00265                 <span class="stringliteral">&quot;Últimas noticias:&quot;</span>,
<a name="l00266"></a>00266                 <span class="stringliteral">&quot;Tu cita favorita&quot;</span>,
<a name="l00267"></a>00267                 <span class="stringliteral">&quot;Enlaces&quot;</span>,
<a name="l00268"></a>00268                 <span class="stringliteral">&quot;Ninguna página de inicio especificada&quot;</span>,
<a name="l00269"></a>00269                 <span class="stringliteral">&quot;Página de inicio:&quot;</span>,
<a name="l00270"></a>00270                 <span class="stringliteral">&quot;Ningún enlace preferido&quot;</span>,
<a name="l00271"></a>00271                 <span class="stringliteral">&quot;Enlace genial 1:&quot;</span>,
<a name="l00272"></a>00272                 <span class="stringliteral">&quot;Enlace genial 2:&quot;</span>,
<a name="l00273"></a>00273                 <span class="stringliteral">&quot;Enlace genial 3:&quot;</span>,
<a name="l00274"></a>00274                 NULL
<a name="l00275"></a>00275         },
<a name="l00276"></a>00276         { ES_ES, <span class="stringliteral">&quot;es_ES&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00277"></a>00277                 <span class="stringliteral">&quot;ID de Yahoo!:&quot;</span>,
<a name="l00278"></a>00278                 <span class="stringliteral">&quot;Privado&quot;</span>,
<a name="l00279"></a>00279                 <span class="stringliteral">&quot;Sin respuesta&quot;</span>,
<a name="l00280"></a>00280                 <span class="stringliteral">&quot;Mi correo-e&quot;</span>,
<a name="l00281"></a>00281                 <span class="stringliteral">&quot;Nombre verdadero:&quot;</span>,
<a name="l00282"></a>00282                 <span class="stringliteral">&quot;Lugar:&quot;</span>,
<a name="l00283"></a>00283                 <span class="stringliteral">&quot;Edad:&quot;</span>,
<a name="l00284"></a>00284                 <span class="stringliteral">&quot;Estado civil:&quot;</span>,
<a name="l00285"></a>00285                 <span class="stringliteral">&quot;Sexo:&quot;</span>,
<a name="l00286"></a>00286                 <span class="stringliteral">&quot;Ocupación:&quot;</span>,
<a name="l00287"></a>00287                 <span class="stringliteral">&quot;Aficiones:&quot;</span>,
<a name="l00288"></a>00288                 <span class="stringliteral">&quot;Ultimas Noticias:&quot;</span>,
<a name="l00289"></a>00289                 <span class="stringliteral">&quot;Tu cita Favorita&quot;</span>,
<a name="l00290"></a>00290                 <span class="stringliteral">&quot;Enlace&quot;</span>,
<a name="l00291"></a>00291                 <span class="stringliteral">&quot;Ninguna página personal especificada&quot;</span>,
<a name="l00292"></a>00292                 <span class="stringliteral">&quot;Página de Inicio:&quot;</span>,
<a name="l00293"></a>00293                 <span class="stringliteral">&quot;Ningún enlace preferido&quot;</span>,
<a name="l00294"></a>00294                 <span class="stringliteral">&quot;Enlaces Preferidos 1:&quot;</span>,
<a name="l00295"></a>00295                 <span class="stringliteral">&quot;Enlaces Preferidos 2:&quot;</span>,
<a name="l00296"></a>00296                 <span class="stringliteral">&quot;Enlaces Preferidos 3:&quot;</span>,
<a name="l00297"></a>00297                 NULL
<a name="l00298"></a>00298         },
<a name="l00299"></a>00299         { ES_MX, <span class="stringliteral">&quot;es_MX&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00300"></a>00300                 <span class="stringliteral">&quot;ID de Yahoo!:&quot;</span>,
<a name="l00301"></a>00301                 <span class="stringliteral">&quot;Privado&quot;</span>,
<a name="l00302"></a>00302                 <span class="stringliteral">&quot;Sin responder&quot;</span>,
<a name="l00303"></a>00303                 <span class="stringliteral">&quot;Mi Dirección de correo-e&quot;</span>,
<a name="l00304"></a>00304                 <span class="stringliteral">&quot;Nombre real:&quot;</span>,
<a name="l00305"></a>00305                 <span class="stringliteral">&quot;Ubicación:&quot;</span>,
<a name="l00306"></a>00306                 <span class="stringliteral">&quot;Edad:&quot;</span>,
<a name="l00307"></a>00307                 <span class="stringliteral">&quot;Estado civil:&quot;</span>,
<a name="l00308"></a>00308                 <span class="stringliteral">&quot;Sexo:&quot;</span>,
<a name="l00309"></a>00309                 <span class="stringliteral">&quot;Ocupación:&quot;</span>,
<a name="l00310"></a>00310                 <span class="stringliteral">&quot;Pasatiempos:&quot;</span>,
<a name="l00311"></a>00311                 <span class="stringliteral">&quot;Ultimas Noticias:&quot;</span>,
<a name="l00312"></a>00312                 <span class="stringliteral">&quot;Su cita favorita&quot;</span>,
<a name="l00313"></a>00313                 <span class="stringliteral">&quot;Enlaces&quot;</span>,
<a name="l00314"></a>00314                 <span class="stringliteral">&quot;Ninguna Página predefinida&quot;</span>,
<a name="l00315"></a>00315                 <span class="stringliteral">&quot;Página web:&quot;</span>,
<a name="l00316"></a>00316                 <span class="stringliteral">&quot;Ningún Enlace preferido&quot;</span>,
<a name="l00317"></a>00317                 <span class="stringliteral">&quot;Enlaces Preferidos 1:&quot;</span>,
<a name="l00318"></a>00318                 <span class="stringliteral">&quot;Enlaces Preferidos 2:&quot;</span>,
<a name="l00319"></a>00319                 <span class="stringliteral">&quot;Enlaces Preferidos 3:&quot;</span>,
<a name="l00320"></a>00320                 NULL
<a name="l00321"></a>00321         },
<a name="l00322"></a>00322         { ES_US, <span class="stringliteral">&quot;es_US&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00323"></a>00323                 <span class="stringliteral">&quot;ID de Yahoo!:&quot;</span>,
<a name="l00324"></a>00324                 <span class="stringliteral">&quot;Privado&quot;</span>,
<a name="l00325"></a>00325                 <span class="stringliteral">&quot;No introdujo una respuesta&quot;</span>,
<a name="l00326"></a>00326                 <span class="stringliteral">&quot;Mi Dirección de correo-e&quot;</span>,
<a name="l00327"></a>00327                 <span class="stringliteral">&quot;Nombre real:&quot;</span>,
<a name="l00328"></a>00328                 <span class="stringliteral">&quot;Localidad:&quot;</span>,
<a name="l00329"></a>00329                 <span class="stringliteral">&quot;Edad:&quot;</span>,
<a name="l00330"></a>00330                 <span class="stringliteral">&quot;Estado civil:&quot;</span>,
<a name="l00331"></a>00331                 <span class="stringliteral">&quot;Sexo:&quot;</span>,
<a name="l00332"></a>00332                 <span class="stringliteral">&quot;Ocupación:&quot;</span>,
<a name="l00333"></a>00333                 <span class="stringliteral">&quot;Pasatiempos:&quot;</span>,
<a name="l00334"></a>00334                 <span class="stringliteral">&quot;Ultimas Noticias:&quot;</span>,
<a name="l00335"></a>00335                 <span class="stringliteral">&quot;Su cita Favorita&quot;</span>,
<a name="l00336"></a>00336                 <span class="stringliteral">&quot;Enlaces&quot;</span>,
<a name="l00337"></a>00337                 <span class="stringliteral">&quot;Ninguna Página de inicio predefinida&quot;</span>,
<a name="l00338"></a>00338                 <span class="stringliteral">&quot;Página de inicio:&quot;</span>,
<a name="l00339"></a>00339                 <span class="stringliteral">&quot;Ningún Enlace preferido&quot;</span>,
<a name="l00340"></a>00340                 <span class="stringliteral">&quot;Enlaces Preferidos 1:&quot;</span>,
<a name="l00341"></a>00341                 <span class="stringliteral">&quot;Enlaces Preferidos 2:&quot;</span>,
<a name="l00342"></a>00342                 <span class="stringliteral">&quot;Enlaces Preferidos 3:&quot;</span>,
<a name="l00343"></a>00343                 NULL
<a name="l00344"></a>00344         },
<a name="l00345"></a>00345         { FR_CA, <span class="stringliteral">&quot;fr_CA&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00346"></a>00346                 <span class="stringliteral">&quot;Compte Yahoo!:&quot;</span>,
<a name="l00347"></a>00347                 <span class="stringliteral">&quot;Privé&quot;</span>,
<a name="l00348"></a>00348                 <span class="stringliteral">&quot;Sans réponse&quot;</span>,
<a name="l00349"></a>00349                 <span class="stringliteral">&quot;Mon courriel&quot;</span>,
<a name="l00350"></a>00350                 <span class="stringliteral">&quot;Nom réel:&quot;</span>,
<a name="l00351"></a>00351                 <span class="stringliteral">&quot;Lieu:&quot;</span>,
<a name="l00352"></a>00352                 <span class="stringliteral">&quot;Âge:&quot;</span>,
<a name="l00353"></a>00353                 <span class="stringliteral">&quot;État civil:&quot;</span>,
<a name="l00354"></a>00354                 <span class="stringliteral">&quot;Sexe:&quot;</span>,
<a name="l00355"></a>00355                 <span class="stringliteral">&quot;Profession:&quot;</span>,
<a name="l00356"></a>00356                 <span class="stringliteral">&quot;Passe-temps:&quot;</span>,
<a name="l00357"></a>00357                 <span class="stringliteral">&quot;Actualités:&quot;</span>,
<a name="l00358"></a>00358                 <span class="stringliteral">&quot;Citation préférée&quot;</span>,
<a name="l00359"></a>00359                 <span class="stringliteral">&quot;Liens&quot;</span>,
<a name="l00360"></a>00360                 <span class="stringliteral">&quot;Pas de mention d&#39;une page personnelle&quot;</span>,
<a name="l00361"></a>00361                 <span class="stringliteral">&quot;Page personnelle:&quot;</span>,
<a name="l00362"></a>00362                 <span class="stringliteral">&quot;Pas de mention d&#39;un lien favori&quot;</span>,
<a name="l00363"></a>00363                 <span class="stringliteral">&quot;Lien préféré 1:&quot;</span>,
<a name="l00364"></a>00364                 <span class="stringliteral">&quot;Lien préféré 2:&quot;</span>,
<a name="l00365"></a>00365                 <span class="stringliteral">&quot;Lien préféré 3:&quot;</span>,
<a name="l00366"></a>00366                 NULL
<a name="l00367"></a>00367         },
<a name="l00368"></a>00368         { FR_FR, <span class="stringliteral">&quot;fr_FR&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00369"></a>00369                 <span class="stringliteral">&quot;Compte Yahoo!:&quot;</span>,
<a name="l00370"></a>00370                 <span class="stringliteral">&quot;Privé&quot;</span>,
<a name="l00371"></a>00371                 <span class="stringliteral">&quot;Sans réponse&quot;</span>,
<a name="l00372"></a>00372                 <span class="stringliteral">&quot;Mon E-mail&quot;</span>,
<a name="l00373"></a>00373                 <span class="stringliteral">&quot;Nom réel:&quot;</span>,
<a name="l00374"></a>00374                 <span class="stringliteral">&quot;Lieu:&quot;</span>,
<a name="l00375"></a>00375                 <span class="stringliteral">&quot;Âge:&quot;</span>,
<a name="l00376"></a>00376                 <span class="stringliteral">&quot;Situation de famille:&quot;</span>,
<a name="l00377"></a>00377                 <span class="stringliteral">&quot;Sexe:&quot;</span>,
<a name="l00378"></a>00378                 <span class="stringliteral">&quot;Profession:&quot;</span>,
<a name="l00379"></a>00379                 <span class="stringliteral">&quot;Centres d&#39;intérêts:&quot;</span>,
<a name="l00380"></a>00380                 <span class="stringliteral">&quot;Actualités:&quot;</span>,
<a name="l00381"></a>00381                 <span class="stringliteral">&quot;Citation préférée&quot;</span>,
<a name="l00382"></a>00382                 <span class="stringliteral">&quot;Liens&quot;</span>,
<a name="l00383"></a>00383                 <span class="stringliteral">&quot;Pas de mention d&#39;une page perso&quot;</span>,
<a name="l00384"></a>00384                 <span class="stringliteral">&quot;Page perso:&quot;</span>,
<a name="l00385"></a>00385                 <span class="stringliteral">&quot;Pas de mention d&#39;un lien favori&quot;</span>,
<a name="l00386"></a>00386                 <span class="stringliteral">&quot;Lien préféré 1:&quot;</span>,
<a name="l00387"></a>00387                 <span class="stringliteral">&quot;Lien préféré 2:&quot;</span>,
<a name="l00388"></a>00388                 <span class="stringliteral">&quot;Lien préféré 3:&quot;</span>,
<a name="l00389"></a>00389                 NULL
<a name="l00390"></a>00390         },
<a name="l00391"></a>00391         { IT, <span class="stringliteral">&quot;it&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00392"></a>00392                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00393"></a>00393                 <span class="stringliteral">&quot;Non pubblica&quot;</span>,
<a name="l00394"></a>00394                 <span class="stringliteral">&quot;Nessuna risposta&quot;</span>,
<a name="l00395"></a>00395                 <span class="stringliteral">&quot;La mia e-mail:&quot;</span>,
<a name="l00396"></a>00396                 <span class="stringliteral">&quot;Nome vero:&quot;</span>,
<a name="l00397"></a>00397                 <span class="stringliteral">&quot;Località:&quot;</span>,
<a name="l00398"></a>00398                 <span class="stringliteral">&quot;Età:&quot;</span>,
<a name="l00399"></a>00399                 <span class="stringliteral">&quot;Stato civile:&quot;</span>,
<a name="l00400"></a>00400                 <span class="stringliteral">&quot;Sesso:&quot;</span>,
<a name="l00401"></a>00401                 <span class="stringliteral">&quot;Occupazione:&quot;</span>,
<a name="l00402"></a>00402                 <span class="stringliteral">&quot;Hobby&quot;</span>,
<a name="l00403"></a>00403                 <span class="stringliteral">&quot;Ultime notizie&quot;</span>,
<a name="l00404"></a>00404                 <span class="stringliteral">&quot;Citazione preferita&quot;</span>,
<a name="l00405"></a>00405                 <span class="stringliteral">&quot;Link&quot;</span>,
<a name="l00406"></a>00406                 <span class="stringliteral">&quot;Nessuna home page specificata&quot;</span>,
<a name="l00407"></a>00407                 <span class="stringliteral">&quot;Inizio:&quot;</span>,
<a name="l00408"></a>00408                 <span class="stringliteral">&quot;Nessun link specificato&quot;</span>,
<a name="l00409"></a>00409                 <span class="stringliteral">&quot;Cool Link 1&quot;</span>,
<a name="l00410"></a>00410                 <span class="stringliteral">&quot;Cool Link 2&quot;</span>,
<a name="l00411"></a>00411                 <span class="stringliteral">&quot;Cool Link 3&quot;</span>,
<a name="l00412"></a>00412                 NULL
<a name="l00413"></a>00413         },
<a name="l00414"></a>00414         { JA, <span class="stringliteral">&quot;ja&quot;</span>, <span class="stringliteral">&quot;EUC-JP&quot;</span>,
<a name="l00415"></a>00415                 <span class="stringliteral">&quot;Yahoo! JAPAN ID：&quot;</span>,
<a name="l00416"></a>00416                 <span class="stringliteral">&quot;非公開&quot;</span>,
<a name="l00417"></a>00417                 <span class="stringliteral">&quot;無回答&quot;</span>,
<a name="l00418"></a>00418                 <span class="stringliteral">&quot;メール：&quot;</span>,
<a name="l00419"></a>00419                 <span class="stringliteral">&quot;名前：&quot;</span>,
<a name="l00420"></a>00420                 <span class="stringliteral">&quot;住所：&quot;</span>,
<a name="l00421"></a>00421                 <span class="stringliteral">&quot;年齢：&quot;</span>,
<a name="l00422"></a>00422                 <span class="stringliteral">&quot;未婚/既婚：&quot;</span>,
<a name="l00423"></a>00423                 <span class="stringliteral">&quot;性別：&quot;</span>,
<a name="l00424"></a>00424                 <span class="stringliteral">&quot;職業：&quot;</span>,
<a name="l00425"></a>00425                 <span class="stringliteral">&quot;趣味：&quot;</span>,
<a name="l00426"></a>00426                 <span class="stringliteral">&quot;最近の出来事：&quot;</span>,
<a name="l00427"></a>00427                 NULL,
<a name="l00428"></a>00428 <span class="preprocessor">#if 0</span>
<a name="l00429"></a>00429 <span class="preprocessor"></span>                <span class="stringliteral">&quot;おすすめサイト&quot;</span>,
<a name="l00430"></a>00430 <span class="preprocessor">#else</span>
<a name="l00431"></a>00431 <span class="preprocessor"></span>                <span class="stringliteral">&quot;自己PR&quot;</span>, <span class="comment">/* &quot;Self description&quot; comes before &quot;Links&quot; for yahoo.co.jp */</span>
<a name="l00432"></a>00432 <span class="preprocessor">#endif</span>
<a name="l00433"></a>00433 <span class="preprocessor"></span>                NULL,
<a name="l00434"></a>00434                 NULL,
<a name="l00435"></a>00435                 NULL,
<a name="l00436"></a>00436                 <span class="stringliteral">&quot;おすすめサイト1：&quot;</span>,
<a name="l00437"></a>00437                 <span class="stringliteral">&quot;おすすめサイト2：&quot;</span>,
<a name="l00438"></a>00438                 <span class="stringliteral">&quot;おすすめサイト3：&quot;</span>,
<a name="l00439"></a>00439                 NULL
<a name="l00440"></a>00440         },
<a name="l00441"></a>00441         { KO, <span class="stringliteral">&quot;ko&quot;</span>, <span class="stringliteral">&quot;EUC-KR&quot;</span>,
<a name="l00442"></a>00442                 <span class="stringliteral">&quot;야후! ID:&quot;</span>,
<a name="l00443"></a>00443                 <span class="stringliteral">&quot;비공개&quot;</span>,
<a name="l00444"></a>00444                 <span class="stringliteral">&quot;비공개&quot;</span>,
<a name="l00445"></a>00445                 <span class="stringliteral">&quot;My Email&quot;</span>,
<a name="l00446"></a>00446                 <span class="stringliteral">&quot;실명:&quot;</span>,
<a name="l00447"></a>00447                 <span class="stringliteral">&quot;거주지:&quot;</span>,
<a name="l00448"></a>00448                 <span class="stringliteral">&quot;나이:&quot;</span>,
<a name="l00449"></a>00449                 <span class="stringliteral">&quot;결혼 여부:&quot;</span>,
<a name="l00450"></a>00450                 <span class="stringliteral">&quot;성별:&quot;</span>,
<a name="l00451"></a>00451                 <span class="stringliteral">&quot;직업:&quot;</span>,
<a name="l00452"></a>00452                 <span class="stringliteral">&quot;취미:&quot;</span>,
<a name="l00453"></a>00453                 <span class="stringliteral">&quot;자기 소개:&quot;</span>,
<a name="l00454"></a>00454                 <span class="stringliteral">&quot;좋아하는 명언&quot;</span>,
<a name="l00455"></a>00455                 <span class="stringliteral">&quot;링크&quot;</span>,
<a name="l00456"></a>00456                 <span class="stringliteral">&quot;홈페이지를 지정하지 않았습니다.&quot;</span>,
<a name="l00457"></a>00457                 <span class="stringliteral">&quot;홈페이지:&quot;</span>,
<a name="l00458"></a>00458                 <span class="stringliteral">&quot;추천 사이트가 없습니다.&quot;</span>,
<a name="l00459"></a>00459                 <span class="stringliteral">&quot;추천 사이트 1:&quot;</span>,
<a name="l00460"></a>00460                 <span class="stringliteral">&quot;추천 사이트 2:&quot;</span>,
<a name="l00461"></a>00461                 <span class="stringliteral">&quot;추천 사이트 3:&quot;</span>,
<a name="l00462"></a>00462                 NULL
<a name="l00463"></a>00463         },
<a name="l00464"></a>00464         { NO, <span class="stringliteral">&quot;no&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00465"></a>00465                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00466"></a>00466                 <span class="stringliteral">&quot;Privat&quot;</span>,
<a name="l00467"></a>00467                 <span class="stringliteral">&quot;Ikke noe svar&quot;</span>,
<a name="l00468"></a>00468                 <span class="stringliteral">&quot;Min e-post&quot;</span>,
<a name="l00469"></a>00469                 <span class="stringliteral">&quot;Virkelig navn:&quot;</span>,
<a name="l00470"></a>00470                 <span class="stringliteral">&quot;Sted:&quot;</span>,
<a name="l00471"></a>00471                 <span class="stringliteral">&quot;Alder:&quot;</span>,
<a name="l00472"></a>00472                 <span class="stringliteral">&quot;Sivilstatus:&quot;</span>,
<a name="l00473"></a>00473                 <span class="stringliteral">&quot;Kjønn:&quot;</span>,
<a name="l00474"></a>00474                 <span class="stringliteral">&quot;Yrke:&quot;</span>,
<a name="l00475"></a>00475                 <span class="stringliteral">&quot;Hobbyer:&quot;</span>,
<a name="l00476"></a>00476                 <span class="stringliteral">&quot;Siste nytt:&quot;</span>,
<a name="l00477"></a>00477                 <span class="stringliteral">&quot;Yndlingssitat&quot;</span>,
<a name="l00478"></a>00478                 <span class="stringliteral">&quot;Lenker&quot;</span>,
<a name="l00479"></a>00479                 <span class="stringliteral">&quot;Ingen hjemmeside angitt&quot;</span>,
<a name="l00480"></a>00480                 <span class="stringliteral">&quot;Hjemmeside:&quot;</span>,
<a name="l00481"></a>00481                 <span class="stringliteral">&quot;No cool link specified&quot;</span>,
<a name="l00482"></a>00482                 <span class="stringliteral">&quot;Bra lenke 1:&quot;</span>,
<a name="l00483"></a>00483                 <span class="stringliteral">&quot;Bra lenke 2:&quot;</span>,
<a name="l00484"></a>00484                 <span class="stringliteral">&quot;Bra lenke 3:&quot;</span>,
<a name="l00485"></a>00485                 NULL
<a name="l00486"></a>00486         },
<a name="l00487"></a>00487         { PT, <span class="stringliteral">&quot;pt&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00488"></a>00488                 <span class="stringliteral">&quot;ID Yahoo!:&quot;</span>,
<a name="l00489"></a>00489                 <span class="stringliteral">&quot;Particular&quot;</span>,
<a name="l00490"></a>00490                 <span class="stringliteral">&quot;Sem resposta&quot;</span>,
<a name="l00491"></a>00491                 <span class="stringliteral">&quot;Meu e-mail&quot;</span>,
<a name="l00492"></a>00492                 <span class="stringliteral">&quot;Nome verdadeiro:&quot;</span>,
<a name="l00493"></a>00493                 <span class="stringliteral">&quot;Local:&quot;</span>,
<a name="l00494"></a>00494                 <span class="stringliteral">&quot;Idade:&quot;</span>,
<a name="l00495"></a>00495                 <span class="stringliteral">&quot;Estado civil:&quot;</span>,
<a name="l00496"></a>00496                 <span class="stringliteral">&quot;Sexo:&quot;</span>,
<a name="l00497"></a>00497                 <span class="stringliteral">&quot;Ocupação:&quot;</span>,
<a name="l00498"></a>00498                 <span class="stringliteral">&quot;Hobbies:&quot;</span>,
<a name="l00499"></a>00499                 <span class="stringliteral">&quot;Últimas notícias:&quot;</span>,
<a name="l00500"></a>00500                 <span class="stringliteral">&quot;Frase favorita&quot;</span>,
<a name="l00501"></a>00501                 <span class="stringliteral">&quot;Links&quot;</span>,
<a name="l00502"></a>00502                 <span class="stringliteral">&quot;Nenhuma página pessoal especificada&quot;</span>,
<a name="l00503"></a>00503                 <span class="stringliteral">&quot;Página pessoal:&quot;</span>,
<a name="l00504"></a>00504                 <span class="stringliteral">&quot;Nenhum site legal especificado&quot;</span>,
<a name="l00505"></a>00505                 <span class="stringliteral">&quot;Site legal 1:&quot;</span>,
<a name="l00506"></a>00506                 <span class="stringliteral">&quot;Site legal 2:&quot;</span>,
<a name="l00507"></a>00507                 <span class="stringliteral">&quot;Site legal 3:&quot;</span>,
<a name="l00508"></a>00508                 NULL
<a name="l00509"></a>00509         },
<a name="l00510"></a>00510         { PT_BR, <span class="stringliteral">&quot;pt_br&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00511"></a>00511                 <span class="stringliteral">&quot;ID Yahoo!:&quot;</span>,
<a name="l00512"></a>00512                 <span class="stringliteral">&quot;Particular&quot;</span>,
<a name="l00513"></a>00513                 <span class="stringliteral">&quot;Sem resposta&quot;</span>,
<a name="l00514"></a>00514                 <span class="stringliteral">&quot;Meu e-mail&quot;</span>,
<a name="l00515"></a>00515                 <span class="stringliteral">&quot;Nome verdadeiro:&quot;</span>,
<a name="l00516"></a>00516                 <span class="stringliteral">&quot;Localização:&quot;</span>,
<a name="l00517"></a>00517                 <span class="stringliteral">&quot;Idade:&quot;</span>,
<a name="l00518"></a>00518                 <span class="stringliteral">&quot;Estado civil:&quot;</span>,
<a name="l00519"></a>00519                 <span class="stringliteral">&quot;Sexo:&quot;</span>,
<a name="l00520"></a>00520                 <span class="stringliteral">&quot;Ocupação:&quot;</span>,
<a name="l00521"></a>00521                 <span class="stringliteral">&quot;Pasatiempos:&quot;</span>,
<a name="l00522"></a>00522                 <span class="stringliteral">&quot;Últimas novidades:&quot;</span>,
<a name="l00523"></a>00523                 <span class="stringliteral">&quot;Frase preferida:&quot;</span>,
<a name="l00524"></a>00524                 <span class="stringliteral">&quot;Links&quot;</span>,
<a name="l00525"></a>00525                 <span class="stringliteral">&quot;Nenhuma home page especificada&quot;</span>,
<a name="l00526"></a>00526                 <span class="stringliteral">&quot;Página Web:&quot;</span>,
<a name="l00527"></a>00527                 <span class="stringliteral">&quot;Nenhum site legal especificado&quot;</span>,
<a name="l00528"></a>00528                 <span class="stringliteral">&quot;Link legal 1&quot;</span>,
<a name="l00529"></a>00529                 <span class="stringliteral">&quot;Link legal 2&quot;</span>,
<a name="l00530"></a>00530                 <span class="stringliteral">&quot;Link legal 3&quot;</span>,
<a name="l00531"></a>00531                 NULL
<a name="l00532"></a>00532         },
<a name="l00533"></a>00533         { SV, <span class="stringliteral">&quot;sv&quot;</span>, <span class="stringliteral">&quot;ISO-8859-1&quot;</span>,
<a name="l00534"></a>00534                 <span class="stringliteral">&quot;Yahoo!-ID:&quot;</span>,
<a name="l00535"></a>00535                 <span class="stringliteral">&quot;Privat&quot;</span>,
<a name="l00536"></a>00536                 <span class="stringliteral">&quot;Inget svar&quot;</span>,
<a name="l00537"></a>00537                 <span class="stringliteral">&quot;Min mail&quot;</span>,
<a name="l00538"></a>00538                 <span class="stringliteral">&quot;Riktigt namn:&quot;</span>,
<a name="l00539"></a>00539                 <span class="stringliteral">&quot;Plats:&quot;</span>,
<a name="l00540"></a>00540                 <span class="stringliteral">&quot;Ålder:&quot;</span>,
<a name="l00541"></a>00541                 <span class="stringliteral">&quot;Civilstånd:&quot;</span>,
<a name="l00542"></a>00542                 <span class="stringliteral">&quot;Kön:&quot;</span>,
<a name="l00543"></a>00543                 <span class="stringliteral">&quot;Yrke:&quot;</span>,
<a name="l00544"></a>00544                 <span class="stringliteral">&quot;Hobby:&quot;</span>,
<a name="l00545"></a>00545                 <span class="stringliteral">&quot;Senaste nytt:&quot;</span>,
<a name="l00546"></a>00546                 <span class="stringliteral">&quot;Favoritcitat&quot;</span>,
<a name="l00547"></a>00547                 <span class="stringliteral">&quot;Länkar&quot;</span>,
<a name="l00548"></a>00548                 <span class="stringliteral">&quot;Ingen hemsida specificerad&quot;</span>,
<a name="l00549"></a>00549                 <span class="stringliteral">&quot;Hemsida:&quot;</span>,
<a name="l00550"></a>00550                 <span class="stringliteral">&quot;Ingen cool länk specificerad&quot;</span>,
<a name="l00551"></a>00551                 <span class="stringliteral">&quot;Coola länkar 1:&quot;</span>,
<a name="l00552"></a>00552                 <span class="stringliteral">&quot;Coola länkar 2:&quot;</span>,
<a name="l00553"></a>00553                 <span class="stringliteral">&quot;Coola länkar 3:&quot;</span>,
<a name="l00554"></a>00554                 NULL
<a name="l00555"></a>00555         },
<a name="l00556"></a>00556         { ZH_CN, <span class="stringliteral">&quot;zh_CN&quot;</span>, <span class="stringliteral">&quot;GB2312&quot;</span>,
<a name="l00557"></a>00557                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00558"></a>00558                 <span class="stringliteral">&quot;没有提供&quot;</span>,
<a name="l00559"></a>00559                 <span class="stringliteral">&quot;没有回答&quot;</span>,
<a name="l00560"></a>00560                 <span class="stringliteral">&quot;个人电邮地址&quot;</span>,
<a name="l00561"></a>00561                 <span class="stringliteral">&quot;真实姓名:&quot;</span>,
<a name="l00562"></a>00562                 <span class="stringliteral">&quot;所在地点:&quot;</span>,
<a name="l00563"></a>00563                 <span class="stringliteral">&quot;年龄:&quot;</span>,
<a name="l00564"></a>00564                 <span class="stringliteral">&quot;婚姻状况:&quot;</span>,
<a name="l00565"></a>00565                 <span class="stringliteral">&quot;性别:&quot;</span>,
<a name="l00566"></a>00566                 <span class="stringliteral">&quot;职业:&quot;</span>,
<a name="l00567"></a>00567                 <span class="stringliteral">&quot;业余爱好:&quot;</span>,
<a name="l00568"></a>00568                 <span class="stringliteral">&quot;个人近况:&quot;</span>,
<a name="l00569"></a>00569                 <span class="stringliteral">&quot;喜欢的引言&quot;</span>,
<a name="l00570"></a>00570                 <span class="stringliteral">&quot;链接&quot;</span>,
<a name="l00571"></a>00571                 <span class="stringliteral">&quot;没有个人主页&quot;</span>,
<a name="l00572"></a>00572                 <span class="stringliteral">&quot;个人主页:&quot;</span>,
<a name="l00573"></a>00573                 <span class="stringliteral">&quot;没有推荐网站链接&quot;</span>,
<a name="l00574"></a>00574                 <span class="stringliteral">&quot;推荐网站链接 1:&quot;</span>,
<a name="l00575"></a>00575                 <span class="stringliteral">&quot;推荐网站链接 2:&quot;</span>,
<a name="l00576"></a>00576                 <span class="stringliteral">&quot;推荐网站链接 3:&quot;</span>,
<a name="l00577"></a>00577                 NULL
<a name="l00578"></a>00578         },
<a name="l00579"></a>00579         { ZH_HK, <span class="stringliteral">&quot;zh_HK&quot;</span>, <span class="stringliteral">&quot;Big5&quot;</span>,
<a name="l00580"></a>00580                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00581"></a>00581                 <span class="stringliteral">&quot;私人的&quot;</span>,
<a name="l00582"></a>00582                 <span class="stringliteral">&quot;沒有回答&quot;</span>,
<a name="l00583"></a>00583                 <span class="stringliteral">&quot;電子信箱&quot;</span>,
<a name="l00584"></a>00584                 <span class="stringliteral">&quot;真實姓名:&quot;</span>,
<a name="l00585"></a>00585                 <span class="stringliteral">&quot;地點:&quot;</span>,
<a name="l00586"></a>00586                 <span class="stringliteral">&quot;年齡:&quot;</span>,
<a name="l00587"></a>00587                 <span class="stringliteral">&quot;婚姻狀況:&quot;</span>,
<a name="l00588"></a>00588                 <span class="stringliteral">&quot;性別:&quot;</span>,
<a name="l00589"></a>00589                 <span class="stringliteral">&quot;職業:&quot;</span>,
<a name="l00590"></a>00590                 <span class="stringliteral">&quot;嗜好:&quot;</span>,
<a name="l00591"></a>00591                 <span class="stringliteral">&quot;最新消息:&quot;</span>,
<a name="l00592"></a>00592                 <span class="stringliteral">&quot;最喜愛的股票叫價&quot;</span>, <span class="comment">/* [sic] Yahoo!&#39;s translators don&#39;t check context */</span>
<a name="l00593"></a>00593                 <span class="stringliteral">&quot;連結&quot;</span>,
<a name="l00594"></a>00594                 <span class="stringliteral">&quot;沒有注明個人網頁&quot;</span>, <span class="comment">/* [sic] */</span>
<a name="l00595"></a>00595                 <span class="stringliteral">&quot;個人網頁:&quot;</span>,
<a name="l00596"></a>00596                 <span class="stringliteral">&quot;沒有注明 Cool 連結&quot;</span>, <span class="comment">/* [sic] */</span>
<a name="l00597"></a>00597                 <span class="stringliteral">&quot;Cool 連結 1:&quot;</span>, <span class="comment">/* TODO */</span>
<a name="l00598"></a>00598                 <span class="stringliteral">&quot;Cool 連結 2:&quot;</span>, <span class="comment">/* TODO */</span>
<a name="l00599"></a>00599                 <span class="stringliteral">&quot;Cool 連結 3:&quot;</span>, <span class="comment">/* TODO */</span>
<a name="l00600"></a>00600                 NULL
<a name="l00601"></a>00601         },
<a name="l00602"></a>00602         { ZH_TW, <span class="stringliteral">&quot;zh_TW&quot;</span>, <span class="stringliteral">&quot;Big5&quot;</span>,
<a name="l00603"></a>00603                 <span class="stringliteral">&quot;帳 號:&quot;</span>,
<a name="l00604"></a>00604                 <span class="stringliteral">&quot;沒有提供&quot;</span>,
<a name="l00605"></a>00605                 <span class="stringliteral">&quot;沒有回應&quot;</span>,
<a name="l00606"></a>00606                 <span class="stringliteral">&quot;電子信箱&quot;</span>,
<a name="l00607"></a>00607                 <span class="stringliteral">&quot;姓名:&quot;</span>,
<a name="l00608"></a>00608                 <span class="stringliteral">&quot;地點:&quot;</span>,
<a name="l00609"></a>00609                 <span class="stringliteral">&quot;年齡:&quot;</span>,
<a name="l00610"></a>00610                 <span class="stringliteral">&quot;婚姻狀態:&quot;</span>,
<a name="l00611"></a>00611                 <span class="stringliteral">&quot;性別:&quot;</span>,
<a name="l00612"></a>00612                 <span class="stringliteral">&quot;職業:&quot;</span>,
<a name="l00613"></a>00613                 <span class="stringliteral">&quot;興趣:&quot;</span>,
<a name="l00614"></a>00614                 <span class="stringliteral">&quot;個人近況:&quot;</span>,
<a name="l00615"></a>00615                 <span class="stringliteral">&quot;喜歡的名句&quot;</span>,
<a name="l00616"></a>00616                 <span class="stringliteral">&quot;連結&quot;</span>,
<a name="l00617"></a>00617                 <span class="stringliteral">&quot;沒有個人網頁&quot;</span>,
<a name="l00618"></a>00618                 <span class="stringliteral">&quot;個人網頁:&quot;</span>,
<a name="l00619"></a>00619                 <span class="stringliteral">&quot;沒有推薦網站連結&quot;</span>,
<a name="l00620"></a>00620                 <span class="stringliteral">&quot;推薦網站連結 1:&quot;</span>,
<a name="l00621"></a>00621                 <span class="stringliteral">&quot;推薦網站連結 2:&quot;</span>,
<a name="l00622"></a>00622                 <span class="stringliteral">&quot;推薦網站連結 3:&quot;</span>,
<a name="l00623"></a>00623                 NULL
<a name="l00624"></a>00624         },
<a name="l00625"></a>00625         { ZH_US, <span class="stringliteral">&quot;zh_US&quot;</span>, <span class="stringliteral">&quot;Big5&quot;</span>, <span class="comment">/* ZH_US is like ZH_TW, but also a bit like ZH_HK */</span>
<a name="l00626"></a>00626                 <span class="stringliteral">&quot;Yahoo! ID:&quot;</span>,
<a name="l00627"></a>00627                 <span class="stringliteral">&quot;沒有提供&quot;</span>,
<a name="l00628"></a>00628                 <span class="stringliteral">&quot;沒有回答&quot;</span>,
<a name="l00629"></a>00629                 <span class="stringliteral">&quot;個人Email地址&quot;</span>,
<a name="l00630"></a>00630                 <span class="stringliteral">&quot;真實姓名:&quot;</span>,
<a name="l00631"></a>00631                 <span class="stringliteral">&quot;地點:&quot;</span>,
<a name="l00632"></a>00632                 <span class="stringliteral">&quot;年齡:&quot;</span>,
<a name="l00633"></a>00633                 <span class="stringliteral">&quot;婚姻狀態:&quot;</span>,
<a name="l00634"></a>00634                 <span class="stringliteral">&quot;性別:&quot;</span>,
<a name="l00635"></a>00635                 <span class="stringliteral">&quot;職業:&quot;</span>,
<a name="l00636"></a>00636                 <span class="stringliteral">&quot;嗜好:&quot;</span>,
<a name="l00637"></a>00637                 <span class="stringliteral">&quot;個人近況:&quot;</span>,
<a name="l00638"></a>00638                 <span class="stringliteral">&quot;喜歡的名句&quot;</span>,
<a name="l00639"></a>00639                 <span class="stringliteral">&quot;連結&quot;</span>,
<a name="l00640"></a>00640                 <span class="stringliteral">&quot;沒有個人網頁&quot;</span>,
<a name="l00641"></a>00641                 <span class="stringliteral">&quot;個人網頁:&quot;</span>,
<a name="l00642"></a>00642                 <span class="stringliteral">&quot;沒有推薦網站連結&quot;</span>,
<a name="l00643"></a>00643                 <span class="stringliteral">&quot;推薦網站連結 1:&quot;</span>, <span class="comment">/* TODO */</span>
<a name="l00644"></a>00644                 <span class="stringliteral">&quot;推薦網站連結 2:&quot;</span>, <span class="comment">/* TODO */</span>
<a name="l00645"></a>00645                 <span class="stringliteral">&quot;推薦網站連結 3:&quot;</span>, <span class="comment">/* TODO */</span>
<a name="l00646"></a>00646                 NULL
<a name="l00647"></a>00647         },
<a name="l00648"></a>00648         { XX, NULL, NULL,
<a name="l00649"></a>00649                 NULL,
<a name="l00650"></a>00650                 NULL,
<a name="l00651"></a>00651                 NULL,
<a name="l00652"></a>00652                 NULL,
<a name="l00653"></a>00653                 NULL,
<a name="l00654"></a>00654                 NULL,
<a name="l00655"></a>00655                 NULL,
<a name="l00656"></a>00656                 NULL,
<a name="l00657"></a>00657                 NULL,
<a name="l00658"></a>00658                 NULL,
<a name="l00659"></a>00659                 NULL,
<a name="l00660"></a>00660                 NULL,
<a name="l00661"></a>00661                 NULL,
<a name="l00662"></a>00662                 NULL,
<a name="l00663"></a>00663                 NULL,
<a name="l00664"></a>00664                 NULL,
<a name="l00665"></a>00665                 NULL,
<a name="l00666"></a>00666                 NULL,
<a name="l00667"></a>00667                 NULL,
<a name="l00668"></a>00668                 NULL,
<a name="l00669"></a>00669                 NULL
<a name="l00670"></a>00670         },
<a name="l00671"></a>00671 };
<a name="l00672"></a>00672 
<a name="l00673"></a>00673 <span class="keyword">static</span> <span class="keywordtype">char</span> *yahoo_info_date_reformat(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structfield.html">field</a>, <span class="keywordtype">size_t</span> len)
<a name="l00674"></a>00674 {
<a name="l00675"></a>00675         <span class="keywordtype">char</span> *tmp = g_strndup(field, len);
<a name="l00676"></a>00676         time_t t = purple_str_to_time(tmp, FALSE, NULL, NULL, NULL);
<a name="l00677"></a>00677 
<a name="l00678"></a>00678         g_free(tmp);
<a name="l00679"></a>00679         <span class="keywordflow">return</span> g_strdup(purple_date_format_short(localtime(&amp;t)));
<a name="l00680"></a>00680 }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682 <span class="keyword">static</span> <span class="keywordtype">char</span> *yahoo_remove_nonbreaking_spaces(<span class="keywordtype">char</span> *str)
<a name="l00683"></a>00683 {
<a name="l00684"></a>00684         <span class="keywordtype">char</span> *p;
<a name="l00685"></a>00685         <span class="keywordflow">while</span> ((p = strstr(str, <span class="stringliteral">&quot;&amp;nbsp;&quot;</span>)) != NULL) {
<a name="l00686"></a>00686                 *p = <span class="charliteral">&#39; &#39;</span>; <span class="comment">/* Turn &amp;nbsp;&#39;s into ordinary blanks */</span>
<a name="l00687"></a>00687                 p += 1;
<a name="l00688"></a>00688                 memmove(p, p + 5, strlen(p + 5));
<a name="l00689"></a>00689                 str[strlen(str) - 5] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00690"></a>00690         }
<a name="l00691"></a>00691         <span class="keywordflow">return</span> str;
<a name="l00692"></a>00692 }
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 <span class="keyword">static</span> <span class="keywordtype">void</span> yahoo_extract_user_info_text(<a class="code" href="struct___purple_notify_user_info.html">PurpleNotifyUserInfo</a> *user_info, <a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a> *info_data) {
<a name="l00695"></a>00695         <a class="code" href="struct___purple_buddy.html">PurpleBuddy</a> *b;
<a name="l00696"></a>00696         <a class="code" href="struct___yahoo_friend.html">YahooFriend</a> *f;
<a name="l00697"></a>00697 
<a name="l00698"></a>00698         b = purple_find_buddy(purple_connection_get_account(info_data-&gt;gc),
<a name="l00699"></a>00699                         info_data-&gt;name);
<a name="l00700"></a>00700 
<a name="l00701"></a>00701         <span class="keywordflow">if</span> (b) {
<a name="l00702"></a>00702                 <span class="keyword">const</span> <span class="keywordtype">char</span> *balias = purple_buddy_get_local_buddy_alias(b);
<a name="l00703"></a>00703                 <span class="keywordflow">if</span>(balias &amp;&amp; balias[0]) {
<a name="l00704"></a>00704                         purple_notify_user_info_add_pair_plaintext(user_info, _(<span class="stringliteral">&quot;Alias&quot;</span>), balias);
<a name="l00705"></a>00705                 }
<a name="l00706"></a>00706 <span class="preprocessor">                #if 0</span>
<a name="l00707"></a>00707 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (b-&gt;idle &gt; 0) {
<a name="l00708"></a>00708                         <span class="keywordtype">char</span> *idletime = purple_str_seconds_to_string(time(NULL) - b-&gt;idle);
<a name="l00709"></a>00709                         purple_notify_user_info_add_pair_plaintext(user_info, _(<span class="stringliteral">&quot;Idle&quot;</span>), idletime);
<a name="l00710"></a>00710                         g_free(idletime);
<a name="l00711"></a>00711                 }
<a name="l00712"></a>00712 <span class="preprocessor">                #endif</span>
<a name="l00713"></a>00713 <span class="preprocessor"></span>
<a name="l00714"></a>00714                 <span class="comment">/* Add the normal tooltip pairs */</span>
<a name="l00715"></a>00715                 yahoo_tooltip_text(b, user_info, TRUE);
<a name="l00716"></a>00716 
<a name="l00717"></a>00717                 <span class="keywordflow">if</span> ((f = yahoo_friend_find(info_data-&gt;gc, purple_buddy_get_name(b)))) {
<a name="l00718"></a>00718                         <span class="keyword">const</span> <span class="keywordtype">char</span> *ip;
<a name="l00719"></a>00719                         <span class="keywordflow">if</span> ((ip = yahoo_friend_get_ip(f)))
<a name="l00720"></a>00720                                 purple_notify_user_info_add_pair_plaintext(user_info, _(<span class="stringliteral">&quot;IP Address&quot;</span>), ip);
<a name="l00721"></a>00721                 }
<a name="l00722"></a>00722         }
<a name="l00723"></a>00723 }
<a name="l00724"></a>00724 
<a name="l00725"></a>00725 <span class="preprocessor">#if PHOTO_SUPPORT</span>
<a name="l00726"></a>00726 <span class="preprocessor"></span>
<a name="l00727"></a>00727 <span class="keyword">static</span> <span class="keywordtype">char</span> *yahoo_get_photo_url(<span class="keyword">const</span> <span class="keywordtype">char</span> *url_text, <span class="keyword">const</span> <span class="keywordtype">char</span> *name) {
<a name="l00728"></a>00728         GString *s = g_string_sized_new(strlen(name) + 8);
<a name="l00729"></a>00729         <span class="keywordtype">char</span> *p;
<a name="l00730"></a>00730         <span class="keywordtype">char</span> *it = NULL;
<a name="l00731"></a>00731 
<a name="l00732"></a>00732         <span class="comment">/*g_string_printf(s, &quot; alt=\&quot;%s\&quot;&gt;&quot;, name);*/</span>
<a name="l00733"></a>00733         <span class="comment">/* Y! newformat */</span>
<a name="l00734"></a>00734         g_string_printf(s, <span class="stringliteral">&quot; alt=%s&gt;&quot;</span>, name);
<a name="l00735"></a>00735         p = strstr(url_text, s-&gt;str);
<a name="l00736"></a>00736 
<a name="l00737"></a>00737         <span class="keywordflow">if</span> (p) {
<a name="l00738"></a>00738                 <span class="comment">/* Search backwards for &quot;http://&quot;. This is stupid, but it works. */</span>
<a name="l00739"></a>00739                 <span class="keywordflow">for</span> (; !it &amp;&amp; p &gt; url_text; p -= 1) {
<a name="l00740"></a>00740                         <span class="comment">/*if (strncmp(p, &quot;\&quot;http://&quot;, 8) == 0) {*/</span>
<a name="l00741"></a>00741                         <span class="comment">/* Y! newformat*/</span>
<a name="l00742"></a>00742                         <span class="keywordflow">if</span> (strncmp(p, <span class="stringliteral">&quot;=http://&quot;</span>, 8) == 0) {
<a name="l00743"></a>00743                                 <span class="keywordtype">char</span> *q;
<a name="l00744"></a>00744                                 p += 1; <span class="comment">/* skip only the &#39; &#39; */</span>
<a name="l00745"></a>00745                                 q = strchr(p, <span class="charliteral">&#39; &#39;</span>);
<a name="l00746"></a>00746                                 <span class="keywordflow">if</span> (q) {
<a name="l00747"></a>00747                                         g_free(it);
<a name="l00748"></a>00748                                         it = g_strndup(p, q - p);
<a name="l00749"></a>00749                                 }
<a name="l00750"></a>00750                         }
<a name="l00751"></a>00751                 }
<a name="l00752"></a>00752         }
<a name="l00753"></a>00753 
<a name="l00754"></a>00754         g_string_free(s, TRUE);
<a name="l00755"></a>00755         <span class="keywordflow">return</span> it;
<a name="l00756"></a>00756 }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00759"></a>00759 yahoo_got_photo(<a class="code" href="struct___purple_util_fetch_url_data.html">PurpleUtilFetchUrlData</a> *url_data, gpointer data,
<a name="l00760"></a>00760                 <span class="keyword">const</span> gchar *url_text, <span class="keywordtype">size_t</span> len, <span class="keyword">const</span> gchar *error_message);
<a name="l00761"></a>00761 
<a name="l00762"></a>00762 <span class="preprocessor">#endif </span><span class="comment">/* PHOTO_SUPPORT */</span>
<a name="l00763"></a>00763 
<a name="l00764"></a>00764 <span class="keyword">static</span> <span class="keywordtype">void</span> yahoo_got_info(<a class="code" href="struct___purple_util_fetch_url_data.html">PurpleUtilFetchUrlData</a> *url_data, gpointer user_data,
<a name="l00765"></a>00765                 <span class="keyword">const</span> gchar *url_text, <span class="keywordtype">size_t</span> len, <span class="keyword">const</span> gchar *error_message)
<a name="l00766"></a>00766 {
<a name="l00767"></a>00767         <a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a> *info_data = (<a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a> *)user_data;
<a name="l00768"></a>00768         <a class="code" href="struct___purple_notify_user_info.html">PurpleNotifyUserInfo</a> *user_info;
<a name="l00769"></a>00769         <span class="keywordtype">char</span> *p;
<a name="l00770"></a>00770 <span class="preprocessor">#if PHOTO_SUPPORT</span>
<a name="l00771"></a>00771 <span class="preprocessor"></span>        <a class="code" href="struct_yahoo_get_info_step_two_data.html">YahooGetInfoStepTwoData</a> *info2_data;
<a name="l00772"></a>00772         <span class="keywordtype">char</span> *photo_url_text = NULL;
<a name="l00773"></a>00773 <span class="preprocessor">#else</span>
<a name="l00774"></a>00774 <span class="preprocessor"></span>        gboolean found = FALSE;
<a name="l00775"></a>00775         <span class="keywordtype">char</span> *stripped;
<a name="l00776"></a>00776         <span class="keywordtype">int</span> stripped_len;
<a name="l00777"></a>00777         <span class="keywordtype">char</span> *last_updated_utf8_string = NULL;
<a name="l00778"></a>00778 <span class="preprocessor">#endif </span><span class="comment">/* !PHOTO_SUPPORT */</span>
<a name="l00779"></a>00779         <span class="keyword">const</span> <span class="keywordtype">char</span> *last_updated_string = NULL;
<a name="l00780"></a>00780         <span class="keywordtype">char</span> *url_buffer;
<a name="l00781"></a>00781         GString *s;
<a name="l00782"></a>00782         <span class="keywordtype">char</span> *tmp;
<a name="l00783"></a>00783         <span class="keywordtype">char</span> *profile_url_text = NULL;
<a name="l00784"></a>00784         <span class="keywordtype">int</span> lang, strid;
<a name="l00785"></a>00785         <a class="code" href="struct_yahoo_data.html">YahooData</a> *yd;
<a name="l00786"></a>00786         <span class="keyword">const</span> <a class="code" href="structprofile__strings__node.html">profile_strings_node_t</a> *strings = NULL;
<a name="l00787"></a>00787         <span class="keyword">const</span> <span class="keywordtype">char</span> *title;
<a name="l00788"></a>00788         profile_state_t profile_state = PROFILE_STATE_DEFAULT;
<a name="l00789"></a>00789 
<a name="l00790"></a>00790         <a class="code" href="debug_8h.html#a112ab6ae0c750309516442f315002bee">purple_debug_info</a>(<span class="stringliteral">&quot;yahoo&quot;</span>, <span class="stringliteral">&quot;In yahoo_got_info\n&quot;</span>);
<a name="l00791"></a>00791 
<a name="l00792"></a>00792         yd = info_data-&gt;gc-&gt;<a class="code" href="struct___purple_connection.html#a65c34f25cec84b2f513f7fdbd27d62bd">proto_data</a>;
<a name="l00793"></a>00793         yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a> = g_slist_remove(yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a>, url_data);
<a name="l00794"></a>00794 
<a name="l00795"></a>00795         user_info = purple_notify_user_info_new();
<a name="l00796"></a>00796 
<a name="l00797"></a>00797         title = yd-&gt;jp ? _(<span class="stringliteral">&quot;Yahoo! Japan Profile&quot;</span>) :
<a name="l00798"></a>00798                                          _(<span class="stringliteral">&quot;Yahoo! Profile&quot;</span>);
<a name="l00799"></a>00799 
<a name="l00800"></a>00800         <span class="comment">/* Get the tooltip info string */</span>
<a name="l00801"></a>00801         yahoo_extract_user_info_text(user_info, info_data);
<a name="l00802"></a>00802 
<a name="l00803"></a>00803         <span class="comment">/* We failed to grab the profile URL.  This is not expected to actually</span>
<a name="l00804"></a>00804 <span class="comment">         * happen except under unusual error conditions, as Yahoo is observed</span>
<a name="l00805"></a>00805 <span class="comment">         * to send back HTML, with a 200 status code.</span>
<a name="l00806"></a>00806 <span class="comment">         */</span>
<a name="l00807"></a>00807         <span class="keywordflow">if</span> (error_message != NULL || url_text == NULL || strcmp(url_text, <span class="stringliteral">&quot;&quot;</span>) == 0) {
<a name="l00808"></a>00808                 purple_notify_user_info_add_pair(user_info, _(<span class="stringliteral">&quot;Error retrieving profile&quot;</span>), NULL);
<a name="l00809"></a>00809                 purple_notify_userinfo(info_data-&gt;gc, info_data-&gt;name,
<a name="l00810"></a>00810                         user_info, NULL, NULL);
<a name="l00811"></a>00811                 purple_notify_user_info_destroy(user_info);
<a name="l00812"></a>00812                 g_free(profile_url_text);
<a name="l00813"></a>00813                 g_free(info_data-&gt;name);
<a name="l00814"></a>00814                 g_free(info_data);
<a name="l00815"></a>00815                 <span class="keywordflow">return</span>;
<a name="l00816"></a>00816         }
<a name="l00817"></a>00817 
<a name="l00818"></a>00818         <span class="comment">/* Construct the correct profile URL */</span>
<a name="l00819"></a>00819         s = g_string_sized_new(80); <span class="comment">/* wild guess */</span>
<a name="l00820"></a>00820         g_string_printf(s, <span class="stringliteral">&quot;%s%s&quot;</span>, (yd-&gt;jp? YAHOOJP_PROFILE_URL: YAHOO_PROFILE_URL),
<a name="l00821"></a>00821                 info_data-&gt;name);
<a name="l00822"></a>00822         profile_url_text = g_string_free(s, FALSE);
<a name="l00823"></a>00823         s = NULL;
<a name="l00824"></a>00824 
<a name="l00825"></a>00825         <span class="comment">/* We don&#39;t yet support the multiple link level of the warning page for</span>
<a name="l00826"></a>00826 <span class="comment">         * &#39;adult&#39; profiles, not to mention the fact that yahoo wants you to be</span>
<a name="l00827"></a>00827 <span class="comment">         * logged in (on the website) to be able to view an &#39;adult&#39; profile.  For</span>
<a name="l00828"></a>00828 <span class="comment">         * now, just tell them that we can&#39;t help them, and provide a link to the</span>
<a name="l00829"></a>00829 <span class="comment">         * profile if they want to do the web browser thing.</span>
<a name="l00830"></a>00830 <span class="comment">         */</span>
<a name="l00831"></a>00831         p = strstr(url_text, <span class="stringliteral">&quot;Adult Profiles Warning Message&quot;</span>);
<a name="l00832"></a>00832         <span class="keywordflow">if</span> (!p) {
<a name="l00833"></a>00833                 p = strstr(url_text, <span class="stringliteral">&quot;Adult Content Warning&quot;</span>); <span class="comment">/* TITLE element */</span>
<a name="l00834"></a>00834         }
<a name="l00835"></a>00835         <span class="keywordflow">if</span> (p) {
<a name="l00836"></a>00836                 tmp = g_strdup_printf(<span class="stringliteral">&quot;&lt;b&gt;%s&lt;/b&gt;&lt;br&gt;&lt;br&gt;&quot;</span>
<a name="l00837"></a>00837                                                           <span class="stringliteral">&quot;%s&lt;br&gt;&lt;a href=\&quot;%s\&quot;&gt;%s&lt;/a&gt;&quot;</span>,
<a name="l00838"></a>00838                                                 _(<span class="stringliteral">&quot;Sorry, profiles marked as containing adult content &quot;</span>
<a name="l00839"></a>00839                                                 <span class="stringliteral">&quot;are not supported at this time.&quot;</span>),
<a name="l00840"></a>00840                                                  _(<span class="stringliteral">&quot;If you wish to view this profile, &quot;</span>
<a name="l00841"></a>00841                                                 <span class="stringliteral">&quot;you will need to visit this link in your web browser:&quot;</span>),
<a name="l00842"></a>00842                                                  profile_url_text, profile_url_text);
<a name="l00843"></a>00843                 purple_notify_user_info_add_pair(user_info, NULL, tmp);
<a name="l00844"></a>00844                 g_free(tmp);
<a name="l00845"></a>00845 
<a name="l00846"></a>00846                 purple_notify_userinfo(info_data-&gt;gc, info_data-&gt;name,
<a name="l00847"></a>00847                                 user_info, NULL, NULL);
<a name="l00848"></a>00848 
<a name="l00849"></a>00849                 g_free(profile_url_text);
<a name="l00850"></a>00850                 purple_notify_user_info_destroy(user_info);
<a name="l00851"></a>00851                 g_free(info_data-&gt;name);
<a name="l00852"></a>00852                 g_free(info_data);
<a name="l00853"></a>00853                 <span class="keywordflow">return</span>;
<a name="l00854"></a>00854         }
<a name="l00855"></a>00855 
<a name="l00856"></a>00856         <span class="comment">/* Check whether the profile is written in a supported language */</span>
<a name="l00857"></a>00857         <span class="keywordflow">for</span> (lang = 0;; lang += 1) {
<a name="l00858"></a>00858                 last_updated_string = profile_langs[lang].last_updated_string;
<a name="l00859"></a>00859                 <span class="keywordflow">if</span> (!last_updated_string)
<a name="l00860"></a>00860                         <span class="keywordflow">break</span>;
<a name="l00861"></a>00861 
<a name="l00862"></a>00862                 p = strstr(url_text, last_updated_string);
<a name="l00863"></a>00863 
<a name="l00864"></a>00864                 <span class="keywordflow">if</span> (p) {
<a name="l00865"></a>00865                         <span class="keywordflow">if</span> (profile_langs[lang].det &amp;&amp; !strstr(url_text, profile_langs[lang].det))
<a name="l00866"></a>00866                                 p = NULL;
<a name="l00867"></a>00867                         <span class="keywordflow">else</span>
<a name="l00868"></a>00868                                 <span class="keywordflow">break</span>;
<a name="l00869"></a>00869                 }
<a name="l00870"></a>00870         }
<a name="l00871"></a>00871 
<a name="l00872"></a>00872         <span class="keywordflow">if</span> (p) {
<a name="l00873"></a>00873                 <span class="keywordflow">for</span> (strid = 0; profile_strings[strid].lang != XX; strid += 1) {
<a name="l00874"></a>00874                         <span class="keywordflow">if</span> (profile_strings[strid].lang == profile_langs[lang].lang) <span class="keywordflow">break</span>;
<a name="l00875"></a>00875                 }
<a name="l00876"></a>00876                 strings = profile_strings + strid;
<a name="l00877"></a>00877                 <a class="code" href="debug_8h.html#a112ab6ae0c750309516442f315002bee">purple_debug_info</a>(<span class="stringliteral">&quot;yahoo&quot;</span>, <span class="stringliteral">&quot;detected profile lang = %s (%d)\n&quot;</span>, profile_strings[strid].lang_string, lang);
<a name="l00878"></a>00878         }
<a name="l00879"></a>00879 
<a name="l00880"></a>00880         <span class="comment">/* Every user may choose his/her own profile language, and this language</span>
<a name="l00881"></a>00881 <span class="comment">         * has nothing to do with the preferences of the user which looks at the</span>
<a name="l00882"></a>00882 <span class="comment">         * profile. We try to support all languages, but nothing is guaranteed.</span>
<a name="l00883"></a>00883 <span class="comment">         * If we cannot determine the language, it means either (1) the profile</span>
<a name="l00884"></a>00884 <span class="comment">         * is written in an unsupported language, (2) our language support is</span>
<a name="l00885"></a>00885 <span class="comment">         * out of date, or (3) the user is not found, or (4) Y! have changed their</span>
<a name="l00886"></a>00886 <span class="comment">         * webpage layout</span>
<a name="l00887"></a>00887 <span class="comment">         */</span>
<a name="l00888"></a>00888         <span class="keywordflow">if</span> (!p || strings-&gt;lang == XX) {
<a name="l00889"></a>00889                 <span class="keywordflow">if</span> (!strstr(url_text, <span class="stringliteral">&quot;Yahoo! Member Directory - User not found&quot;</span>)
<a name="l00890"></a>00890                                 &amp;&amp; !strstr(url_text, <span class="stringliteral">&quot;was not found on this server.&quot;</span>)
<a name="l00891"></a>00891                                 &amp;&amp; !strstr(url_text, <span class="stringliteral">&quot;\xb8\xf8\xb3\xab\xa5\xd7\xa5\xed\xa5\xd5\xa5\xa3\xa1\xbc\xa5\xeb\xa4\xac\xb8\xab\xa4\xc4\xa4\xab\xa4\xea\xa4\xde\xa4\xbb\xa4\xf3&quot;</span>)) {
<a name="l00892"></a>00892                         profile_state = PROFILE_STATE_UNKNOWN_LANGUAGE;
<a name="l00893"></a>00893                 } <span class="keywordflow">else</span> {
<a name="l00894"></a>00894                         profile_state = PROFILE_STATE_NOT_FOUND;
<a name="l00895"></a>00895                 }
<a name="l00896"></a>00896         }
<a name="l00897"></a>00897 
<a name="l00898"></a>00898 <span class="preprocessor">#if PHOTO_SUPPORT</span>
<a name="l00899"></a>00899 <span class="preprocessor"></span>        photo_url_text = yahoo_get_photo_url(url_text, info_data-&gt;name);
<a name="l00900"></a>00900 <span class="preprocessor">#endif </span><span class="comment">/* PHOTO_SUPPORT */</span>
<a name="l00901"></a>00901 
<a name="l00902"></a>00902         url_buffer = g_strdup(url_text);
<a name="l00903"></a>00903 
<a name="l00904"></a>00904         <span class="comment">/*</span>
<a name="l00905"></a>00905 <span class="comment">         * purple_markup_strip_html() doesn&#39;t strip out character entities like &amp;nbsp;</span>
<a name="l00906"></a>00906 <span class="comment">         * and &amp;#183;</span>
<a name="l00907"></a>00907 <span class="comment">        */</span>
<a name="l00908"></a>00908         yahoo_remove_nonbreaking_spaces(url_buffer);
<a name="l00909"></a>00909 <span class="preprocessor">#if 1</span>
<a name="l00910"></a>00910 <span class="preprocessor"></span>        <span class="keywordflow">while</span> ((p = strstr(url_buffer, <span class="stringliteral">&quot;&amp;#183;&quot;</span>)) != NULL) {
<a name="l00911"></a>00911                 memmove(p, p + 6, strlen(p + 6));
<a name="l00912"></a>00912                 url_buffer[strlen(url_buffer) - 6] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00913"></a>00913         }
<a name="l00914"></a>00914 <span class="preprocessor">#endif</span>
<a name="l00915"></a>00915 <span class="preprocessor"></span>
<a name="l00916"></a>00916         <span class="comment">/* nuke the nasty \r&#39;s */</span>
<a name="l00917"></a>00917         purple_str_strip_char(url_buffer, <span class="charliteral">&#39;\r&#39;</span>);
<a name="l00918"></a>00918 
<a name="l00919"></a>00919 <span class="preprocessor">#if PHOTO_SUPPORT</span>
<a name="l00920"></a>00920 <span class="preprocessor"></span>        <span class="comment">/* Marshall the existing state */</span>
<a name="l00921"></a>00921         info2_data = g_malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_yahoo_get_info_step_two_data.html">YahooGetInfoStepTwoData</a>));
<a name="l00922"></a>00922         info2_data-&gt;info_data = info_data;
<a name="l00923"></a>00923         info2_data-&gt;url_buffer = url_buffer;
<a name="l00924"></a>00924         info2_data-&gt;photo_url_text = photo_url_text;
<a name="l00925"></a>00925         info2_data-&gt;profile_url_text = profile_url_text;
<a name="l00926"></a>00926         info2_data-&gt;strings = strings;
<a name="l00927"></a>00927         info2_data-&gt;last_updated_string = last_updated_string;
<a name="l00928"></a>00928         info2_data-&gt;title = title;
<a name="l00929"></a>00929         info2_data-&gt;profile_state = profile_state;
<a name="l00930"></a>00930         info2_data-&gt;user_info = user_info;
<a name="l00931"></a>00931 
<a name="l00932"></a>00932         <span class="comment">/* Try to put the photo in there too, if there&#39;s one */</span>
<a name="l00933"></a>00933         <span class="keywordflow">if</span> (photo_url_text) {
<a name="l00934"></a>00934                 <a class="code" href="struct___purple_util_fetch_url_data.html">PurpleUtilFetchUrlData</a> *url_data;
<a name="l00935"></a>00935                 <span class="comment">/* use whole URL if using HTTP Proxy */</span>
<a name="l00936"></a>00936                 gboolean use_whole_url = yahoo_account_use_http_proxy(info_data-&gt;gc);
<a name="l00937"></a>00937 
<a name="l00938"></a>00938                 <span class="comment">/* User-uploaded photos use a different server that requires the Host</span>
<a name="l00939"></a>00939 <span class="comment">                 * header, but Yahoo Japan will use the &quot;chunked&quot; content encoding if</span>
<a name="l00940"></a>00940 <span class="comment">                 * we specify HTTP 1.1. So we have to specify 1.0 &amp; fix purple_util_fetch_url</span>
<a name="l00941"></a>00941 <span class="comment">                 */</span>
<a name="l00942"></a>00942                 url_data = <a class="code" href="util_8h.html#a3a99b02ce53153ac1942b39107dfc26a">purple_util_fetch_url</a>(photo_url_text, use_whole_url, NULL,
<a name="l00943"></a>00943                                 FALSE, yahoo_got_photo, info2_data);
<a name="l00944"></a>00944                 <span class="keywordflow">if</span> (url_data != NULL)
<a name="l00945"></a>00945                         yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a> = g_slist_prepend(yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a>, url_data);
<a name="l00946"></a>00946         } <span class="keywordflow">else</span> {
<a name="l00947"></a>00947                 <span class="comment">/* Emulate a callback */</span>
<a name="l00948"></a>00948                 yahoo_got_photo(NULL, info2_data, NULL, 0, NULL);
<a name="l00949"></a>00949         }
<a name="l00950"></a>00950 }
<a name="l00951"></a>00951 
<a name="l00952"></a>00952 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00953"></a>00953 yahoo_got_photo(<a class="code" href="struct___purple_util_fetch_url_data.html">PurpleUtilFetchUrlData</a> *url_data, gpointer data,
<a name="l00954"></a>00954                 <span class="keyword">const</span> gchar *url_text, <span class="keywordtype">size_t</span> len, <span class="keyword">const</span> gchar *error_message)
<a name="l00955"></a>00955 {
<a name="l00956"></a>00956         <a class="code" href="struct_yahoo_get_info_step_two_data.html">YahooGetInfoStepTwoData</a> *info2_data = (<a class="code" href="struct_yahoo_get_info_step_two_data.html">YahooGetInfoStepTwoData</a> *)data;
<a name="l00957"></a>00957         <a class="code" href="struct_yahoo_data.html">YahooData</a> *yd;
<a name="l00958"></a>00958         gboolean found = FALSE;
<a name="l00959"></a>00959         <span class="keywordtype">int</span> <span class="keywordtype">id</span> = -1;
<a name="l00960"></a>00960 
<a name="l00961"></a>00961         <span class="comment">/* Temporary variables */</span>
<a name="l00962"></a>00962         <span class="keywordtype">char</span> *p = NULL;
<a name="l00963"></a>00963         <span class="keywordtype">char</span> *stripped;
<a name="l00964"></a>00964         <span class="keywordtype">int</span> stripped_len;
<a name="l00965"></a>00965         <span class="keywordtype">char</span> *last_updated_utf8_string = NULL;
<a name="l00966"></a>00966         <span class="keywordtype">char</span> *tmp;
<a name="l00967"></a>00967 
<a name="l00968"></a>00968         <span class="comment">/* Unmarshall the saved state */</span>
<a name="l00969"></a>00969         <a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a> *info_data = info2_data-&gt;info_data;
<a name="l00970"></a>00970         <span class="keywordtype">char</span> *url_buffer = info2_data-&gt;url_buffer;
<a name="l00971"></a>00971         <a class="code" href="struct___purple_notify_user_info.html">PurpleNotifyUserInfo</a> *user_info = info2_data-&gt;user_info;
<a name="l00972"></a>00972         <span class="keywordtype">char</span> *photo_url_text = info2_data-&gt;photo_url_text;
<a name="l00973"></a>00973         <span class="keywordtype">char</span> *profile_url_text = info2_data-&gt;profile_url_text;
<a name="l00974"></a>00974         <span class="keyword">const</span> <a class="code" href="structprofile__strings__node.html">profile_strings_node_t</a> *strings = info2_data-&gt;strings;
<a name="l00975"></a>00975         <span class="keyword">const</span> <span class="keywordtype">char</span> *last_updated_string = info2_data-&gt;last_updated_string;
<a name="l00976"></a>00976         profile_state_t profile_state = info2_data-&gt;profile_state;
<a name="l00977"></a>00977 
<a name="l00978"></a>00978         <span class="comment">/* We continue here from yahoo_got_info, as if nothing has happened */</span>
<a name="l00979"></a>00979 <span class="preprocessor">#endif </span><span class="comment">/* PHOTO_SUPPORT */</span>
<a name="l00980"></a>00980 
<a name="l00981"></a>00981         <span class="comment">/* Jun 29 05 Bleeter: Y! changed their profile pages. Terminators now seem to be */</span>
<a name="l00982"></a>00982         <span class="comment">/* &lt;/dd&gt; and not \n. The prpl&#39;s need to be audited before it can be moved */</span>
<a name="l00983"></a>00983         <span class="comment">/* in to purple_markup_strip_html*/</span>
<a name="l00984"></a>00984         <span class="keywordtype">char</span> *fudged_buffer;
<a name="l00985"></a>00985 
<a name="l00986"></a>00986         yd = info_data-&gt;gc-&gt;<a class="code" href="struct___purple_connection.html#a65c34f25cec84b2f513f7fdbd27d62bd">proto_data</a>;
<a name="l00987"></a>00987         yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a> = g_slist_remove(yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a>, url_data);
<a name="l00988"></a>00988 
<a name="l00989"></a>00989         fudged_buffer = purple_strcasereplace(url_buffer, <span class="stringliteral">&quot;&lt;/dd&gt;&quot;</span>, <span class="stringliteral">&quot;&lt;/dd&gt;&lt;br&gt;&quot;</span>);
<a name="l00990"></a>00990         <span class="comment">/* nuke the html, it&#39;s easier than trying to parse the horrid stuff */</span>
<a name="l00991"></a>00991         stripped = purple_markup_strip_html(fudged_buffer);
<a name="l00992"></a>00992         stripped_len = strlen(stripped);
<a name="l00993"></a>00993 
<a name="l00994"></a>00994         <a class="code" href="debug_8h.html#a89b6474a316d3e177cc91b35897ae20a">purple_debug_misc</a>(<span class="stringliteral">&quot;yahoo&quot;</span>, <span class="stringliteral">&quot;stripped = %p\n&quot;</span>, stripped);
<a name="l00995"></a>00995         <a class="code" href="debug_8h.html#a89b6474a316d3e177cc91b35897ae20a">purple_debug_misc</a>(<span class="stringliteral">&quot;yahoo&quot;</span>, <span class="stringliteral">&quot;url_buffer = %p\n&quot;</span>, url_buffer);
<a name="l00996"></a>00996 
<a name="l00997"></a>00997         <span class="comment">/* convert to utf8 */</span>
<a name="l00998"></a>00998         <span class="keywordflow">if</span> (strings &amp;&amp; strings-&gt;charset) {
<a name="l00999"></a>00999                 p = g_convert(stripped, -1, <span class="stringliteral">&quot;utf-8&quot;</span>, strings-&gt;charset,
<a name="l01000"></a>01000                                 NULL, NULL, NULL);
<a name="l01001"></a>01001                 <span class="keywordflow">if</span> (!p) {
<a name="l01002"></a>01002                         p = g_locale_to_utf8(stripped, -1, NULL, NULL, NULL);
<a name="l01003"></a>01003                         <span class="keywordflow">if</span> (!p) {
<a name="l01004"></a>01004                                 p = g_convert(stripped, -1, <span class="stringliteral">&quot;utf-8&quot;</span>, <span class="stringliteral">&quot;windows-1252&quot;</span>,
<a name="l01005"></a>01005                                                 NULL, NULL, NULL);
<a name="l01006"></a>01006                         }
<a name="l01007"></a>01007                 }
<a name="l01008"></a>01008                 <span class="keywordflow">if</span> (p) {
<a name="l01009"></a>01009                         g_free(stripped);
<a name="l01010"></a>01010                         stripped = purple_utf8_ncr_decode(p);
<a name="l01011"></a>01011                         stripped_len = strlen(stripped);
<a name="l01012"></a>01012                         g_free(p);
<a name="l01013"></a>01013                 }
<a name="l01014"></a>01014         }
<a name="l01015"></a>01015         p = NULL;
<a name="l01016"></a>01016 
<a name="l01017"></a>01017         <span class="comment">/* &quot;Last updated&quot; should also be converted to utf8 and with &amp;nbsp; killed */</span>
<a name="l01018"></a>01018         <span class="keywordflow">if</span> (strings &amp;&amp; strings-&gt;charset) {
<a name="l01019"></a>01019                 last_updated_utf8_string = g_convert(last_updated_string, -1, <span class="stringliteral">&quot;utf-8&quot;</span>,
<a name="l01020"></a>01020                                 strings-&gt;charset, NULL, NULL, NULL);
<a name="l01021"></a>01021                 yahoo_remove_nonbreaking_spaces(last_updated_utf8_string);
<a name="l01022"></a>01022 
<a name="l01023"></a>01023                 <a class="code" href="debug_8h.html#a89b6474a316d3e177cc91b35897ae20a">purple_debug_misc</a>(<span class="stringliteral">&quot;yahoo&quot;</span>, <span class="stringliteral">&quot;after utf8 conversion: stripped = (%s)\n&quot;</span>, stripped);
<a name="l01024"></a>01024         }
<a name="l01025"></a>01025 
<a name="l01026"></a>01026         <span class="keywordflow">if</span> (profile_state == PROFILE_STATE_DEFAULT) {
<a name="l01027"></a>01027 <span class="preprocessor">#if 0</span>
<a name="l01028"></a>01028 <span class="preprocessor"></span>        <span class="comment">/* extract their Yahoo! ID and put it in. Don&#39;t bother marking has_info as</span>
<a name="l01029"></a>01029 <span class="comment">         * true, since the Yahoo! ID will always be there */</span>
<a name="l01030"></a>01030         <span class="keywordflow">if</span> (!purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01031"></a>01031                         strings-&gt;yahoo_id_string, (yd-&gt;jp ? 2 : 10), <span class="stringliteral">&quot;\n&quot;</span>, 0,
<a name="l01032"></a>01032                         NULL, _(<span class="stringliteral">&quot;Yahoo! ID&quot;</span>), 0, NULL, NULL))
<a name="l01033"></a>01033                 ;
<a name="l01034"></a>01034 <span class="preprocessor">#endif</span>
<a name="l01035"></a>01035 <span class="preprocessor"></span>
<a name="l01036"></a>01036 <span class="preprocessor">#if PHOTO_SUPPORT</span>
<a name="l01037"></a>01037 <span class="preprocessor"></span>        <span class="comment">/* Try to put the photo in there too, if there&#39;s one and is readable */</span>
<a name="l01038"></a>01038         <span class="keywordflow">if</span> (data &amp;&amp; url_text &amp;&amp; len != 0) {
<a name="l01039"></a>01039                 <span class="keywordflow">if</span> (strstr(url_text, <span class="stringliteral">&quot;400 Bad Request&quot;</span>)
<a name="l01040"></a>01040                                 || strstr(url_text, <span class="stringliteral">&quot;403 Forbidden&quot;</span>)
<a name="l01041"></a>01041                                 || strstr(url_text, <span class="stringliteral">&quot;404 Not Found&quot;</span>)) {
<a name="l01042"></a>01042 
<a name="l01043"></a>01043                         <a class="code" href="debug_8h.html#a112ab6ae0c750309516442f315002bee">purple_debug_info</a>(<span class="stringliteral">&quot;yahoo&quot;</span>, <span class="stringliteral">&quot;Error getting %s: %s\n&quot;</span>,
<a name="l01044"></a>01044                                         photo_url_text, url_text);
<a name="l01045"></a>01045                 } <span class="keywordflow">else</span> {
<a name="l01046"></a>01046                         <a class="code" href="debug_8h.html#a112ab6ae0c750309516442f315002bee">purple_debug_info</a>(<span class="stringliteral">&quot;yahoo&quot;</span>, <span class="stringliteral">&quot;%s is %&quot;</span> G_GSIZE_FORMAT
<a name="l01047"></a>01047                                         <span class="stringliteral">&quot; bytes\n&quot;</span>, photo_url_text, len);
<a name="l01048"></a>01048                         <span class="keywordtype">id</span> = purple_imgstore_add_with_id(g_memdup(url_text, len), len, NULL);
<a name="l01049"></a>01049 
<a name="l01050"></a>01050                         tmp = g_strdup_printf(<span class="stringliteral">&quot;&lt;img id=\&quot;%d\&quot;&gt;&lt;br&gt;&quot;</span>, <span class="keywordtype">id</span>);
<a name="l01051"></a>01051                         purple_notify_user_info_add_pair(user_info, NULL, tmp);
<a name="l01052"></a>01052                         g_free(tmp);
<a name="l01053"></a>01053                 }
<a name="l01054"></a>01054         }
<a name="l01055"></a>01055 <span class="preprocessor">#endif </span><span class="comment">/* PHOTO_SUPPORT */</span>
<a name="l01056"></a>01056 
<a name="l01057"></a>01057         <span class="comment">/* extract their Email address and put it in */</span>
<a name="l01058"></a>01058         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01059"></a>01059                         strings-&gt;my_email_string, (yd-&gt;jp ? 4 : 1), <span class="stringliteral">&quot; &quot;</span>, 0,
<a name="l01060"></a>01060                         strings-&gt;private_string, _(<span class="stringliteral">&quot;Email&quot;</span>), 0, NULL, NULL);
<a name="l01061"></a>01061 
<a name="l01062"></a>01062         <span class="comment">/* extract the Nickname if it exists */</span>
<a name="l01063"></a>01063         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01064"></a>01064                         <span class="stringliteral">&quot;Nickname:&quot;</span>, 1, <span class="stringliteral">&quot;\n&quot;</span>, <span class="charliteral">&#39;\n&#39;</span>,
<a name="l01065"></a>01065                         NULL, _(<span class="stringliteral">&quot;Nickname&quot;</span>), 0, NULL, NULL);
<a name="l01066"></a>01066 
<a name="l01067"></a>01067         <span class="comment">/* extract their RealName and put it in */</span>
<a name="l01068"></a>01068         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01069"></a>01069                         strings-&gt;realname_string, (yd-&gt;jp ? 3 : 1), <span class="stringliteral">&quot;\n&quot;</span>, <span class="charliteral">&#39;\n&#39;</span>,
<a name="l01070"></a>01070                         NULL, _(<span class="stringliteral">&quot;Real Name&quot;</span>), 0, NULL, NULL);
<a name="l01071"></a>01071 
<a name="l01072"></a>01072         <span class="comment">/* extract their Location and put it in */</span>
<a name="l01073"></a>01073         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01074"></a>01074                         strings-&gt;location_string, (yd-&gt;jp ? 4 : 2), <span class="stringliteral">&quot;\n&quot;</span>, <span class="charliteral">&#39;\n&#39;</span>,
<a name="l01075"></a>01075                         NULL, _(<span class="stringliteral">&quot;Location&quot;</span>), 0, NULL, NULL);
<a name="l01076"></a>01076 
<a name="l01077"></a>01077         <span class="comment">/* extract their Age and put it in */</span>
<a name="l01078"></a>01078         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01079"></a>01079                         strings-&gt;age_string, (yd-&gt;jp ? 2 : 3), <span class="stringliteral">&quot;\n&quot;</span>, <span class="charliteral">&#39;\n&#39;</span>,
<a name="l01080"></a>01080                         NULL, _(<span class="stringliteral">&quot;Age&quot;</span>), 0, NULL, NULL);
<a name="l01081"></a>01081 
<a name="l01082"></a>01082         <span class="comment">/* extract their MaritalStatus and put it in */</span>
<a name="l01083"></a>01083         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01084"></a>01084                         strings-&gt;maritalstatus_string, (yd-&gt;jp ? 2 : 3), <span class="stringliteral">&quot;\n&quot;</span>, <span class="charliteral">&#39;\n&#39;</span>,
<a name="l01085"></a>01085                         strings-&gt;no_answer_string, _(<span class="stringliteral">&quot;Marital Status&quot;</span>), 0, NULL, NULL);
<a name="l01086"></a>01086 
<a name="l01087"></a>01087         <span class="comment">/* extract their Gender and put it in */</span>
<a name="l01088"></a>01088         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01089"></a>01089                         strings-&gt;gender_string, (yd-&gt;jp ? 2 : 3), <span class="stringliteral">&quot;\n&quot;</span>, <span class="charliteral">&#39;\n&#39;</span>,
<a name="l01090"></a>01090                         strings-&gt;no_answer_string, _(<span class="stringliteral">&quot;Gender&quot;</span>), 0, NULL, NULL);
<a name="l01091"></a>01091 
<a name="l01092"></a>01092         <span class="comment">/* extract their Occupation and put it in */</span>
<a name="l01093"></a>01093         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01094"></a>01094                         strings-&gt;occupation_string, 2, <span class="stringliteral">&quot;\n&quot;</span>, <span class="charliteral">&#39;\n&#39;</span>,
<a name="l01095"></a>01095                         NULL, _(<span class="stringliteral">&quot;Occupation&quot;</span>), 0, NULL, NULL);
<a name="l01096"></a>01096 
<a name="l01097"></a>01097         <span class="comment">/* Hobbies, Latest News, and Favorite Quote are a bit different, since</span>
<a name="l01098"></a>01098 <span class="comment">         * the values can contain embedded newlines... but any or all of them</span>
<a name="l01099"></a>01099 <span class="comment">         * can also not appear.  The way we delimit them is to successively</span>
<a name="l01100"></a>01100 <span class="comment">         * look for the next one that _could_ appear, and if all else fails,</span>
<a name="l01101"></a>01101 <span class="comment">         * we end the section by looking for the &#39;Links&#39; heading, which is the</span>
<a name="l01102"></a>01102 <span class="comment">         * next thing to follow this bunch.  (For Yahoo Japan, we check for</span>
<a name="l01103"></a>01103 <span class="comment">         * the &quot;Description&quot; (&quot;Self PR&quot;) heading instead of &quot;Links&quot;.)</span>
<a name="l01104"></a>01104 <span class="comment">         */</span>
<a name="l01105"></a>01105 
<a name="l01106"></a>01106         <span class="keywordflow">if</span> (!purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01107"></a>01107                         strings-&gt;hobbies_string, (yd-&gt;jp ? 3 : 1), strings-&gt;latest_news_string,
<a name="l01108"></a>01108                         <span class="charliteral">&#39;\n&#39;</span>, <span class="stringliteral">&quot;\n&quot;</span>, _(<span class="stringliteral">&quot;Hobbies&quot;</span>), 0, NULL, NULL))
<a name="l01109"></a>01109         {
<a name="l01110"></a>01110                 <span class="keywordflow">if</span> (!purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01111"></a>01111                                 strings-&gt;hobbies_string, 1, strings-&gt;favorite_quote_string,
<a name="l01112"></a>01112                                 <span class="charliteral">&#39;\n&#39;</span>, <span class="stringliteral">&quot;\n&quot;</span>, _(<span class="stringliteral">&quot;Hobbies&quot;</span>), 0, NULL, NULL))
<a name="l01113"></a>01113                 {
<a name="l01114"></a>01114                         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01115"></a>01115                                         strings-&gt;hobbies_string, 1, strings-&gt;links_string,
<a name="l01116"></a>01116                                         <span class="charliteral">&#39;\n&#39;</span>, <span class="stringliteral">&quot;\n&quot;</span>, _(<span class="stringliteral">&quot;Hobbies&quot;</span>), 0, NULL, NULL);
<a name="l01117"></a>01117                 }
<a name="l01118"></a>01118                 <span class="keywordflow">else</span>
<a name="l01119"></a>01119                         found = TRUE;
<a name="l01120"></a>01120         }
<a name="l01121"></a>01121         <span class="keywordflow">else</span>
<a name="l01122"></a>01122                 found = TRUE;
<a name="l01123"></a>01123 
<a name="l01124"></a>01124         <span class="keywordflow">if</span> (!purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01125"></a>01125                         strings-&gt;latest_news_string, 1, strings-&gt;favorite_quote_string,
<a name="l01126"></a>01126                         <span class="charliteral">&#39;\n&#39;</span>, <span class="stringliteral">&quot;\n&quot;</span>, _(<span class="stringliteral">&quot;Latest News&quot;</span>), 0, NULL, NULL))
<a name="l01127"></a>01127         {
<a name="l01128"></a>01128                 found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01129"></a>01129                                 strings-&gt;latest_news_string, (yd-&gt;jp ? 2 : 1), strings-&gt;links_string,
<a name="l01130"></a>01130                                 <span class="charliteral">&#39;\n&#39;</span>, <span class="stringliteral">&quot;\n&quot;</span>, _(<span class="stringliteral">&quot;Latest News&quot;</span>), 0, NULL, NULL);
<a name="l01131"></a>01131         }
<a name="l01132"></a>01132         <span class="keywordflow">else</span>
<a name="l01133"></a>01133                 found = TRUE;
<a name="l01134"></a>01134 
<a name="l01135"></a>01135         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01136"></a>01136                         strings-&gt;favorite_quote_string, 1, strings-&gt;links_string,
<a name="l01137"></a>01137                         <span class="charliteral">&#39;\n&#39;</span>, <span class="stringliteral">&quot;\n&quot;</span>, _(<span class="stringliteral">&quot;Favorite Quote&quot;</span>), 0, NULL, NULL);
<a name="l01138"></a>01138 
<a name="l01139"></a>01139         <span class="comment">/* Home Page will either be &quot;No home page specified&quot;,</span>
<a name="l01140"></a>01140 <span class="comment">         * or &quot;Home Page: &quot; and a link.</span>
<a name="l01141"></a>01141 <span class="comment">         * For Yahoo! Japan, if there is no home page specified,</span>
<a name="l01142"></a>01142 <span class="comment">         * neither &quot;No home page specified&quot; nor &quot;Home Page:&quot; is shown.</span>
<a name="l01143"></a>01143 <span class="comment">         */</span>
<a name="l01144"></a>01144         <span class="keywordflow">if</span> (strings-&gt;home_page_string) {
<a name="l01145"></a>01145                 p = !strings-&gt;no_home_page_specified_string? NULL:
<a name="l01146"></a>01146                         strstr(stripped, strings-&gt;no_home_page_specified_string);
<a name="l01147"></a>01147                 <span class="keywordflow">if</span>(!p)
<a name="l01148"></a>01148                 {
<a name="l01149"></a>01149                         found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01150"></a>01150                                         strings-&gt;home_page_string, 1, <span class="stringliteral">&quot;\n&quot;</span>, 0, NULL,
<a name="l01151"></a>01151                                         _(<span class="stringliteral">&quot;Home Page&quot;</span>), 1, NULL, NULL);
<a name="l01152"></a>01152                 }
<a name="l01153"></a>01153         }
<a name="l01154"></a>01154 
<a name="l01155"></a>01155         <span class="comment">/* Cool Link {1,2,3} is also different.  If &quot;No cool link specified&quot;</span>
<a name="l01156"></a>01156 <span class="comment">         * exists, then we have none.  If we have one however, we&#39;ll need to</span>
<a name="l01157"></a>01157 <span class="comment">         * check and see if we have a second one.  If we have a second one,</span>
<a name="l01158"></a>01158 <span class="comment">         * we have to check to see if we have a third one.</span>
<a name="l01159"></a>01159 <span class="comment">         */</span>
<a name="l01160"></a>01160         p = !strings-&gt;no_cool_link_specified_string? NULL:
<a name="l01161"></a>01161                 strstr(stripped,strings-&gt;no_cool_link_specified_string);
<a name="l01162"></a>01162         <span class="keywordflow">if</span> (!p)
<a name="l01163"></a>01163         {
<a name="l01164"></a>01164                 <span class="keywordflow">if</span> (purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01165"></a>01165                                 strings-&gt;cool_link_1_string, 1, <span class="stringliteral">&quot;\n&quot;</span>, 0, NULL,
<a name="l01166"></a>01166                                 _(<span class="stringliteral">&quot;Cool Link 1&quot;</span>), 1, NULL, NULL))
<a name="l01167"></a>01167                 {
<a name="l01168"></a>01168                         found = TRUE;
<a name="l01169"></a>01169                         <span class="keywordflow">if</span> (purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01170"></a>01170                                         strings-&gt;cool_link_2_string, 1, <span class="stringliteral">&quot;\n&quot;</span>, 0, NULL,
<a name="l01171"></a>01171                                         _(<span class="stringliteral">&quot;Cool Link 2&quot;</span>), 1, NULL, NULL))
<a name="l01172"></a>01172                         {
<a name="l01173"></a>01173                                 purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01174"></a>01174                                                 strings-&gt;cool_link_3_string, 1, <span class="stringliteral">&quot;\n&quot;</span>, 0, NULL,
<a name="l01175"></a>01175                                                 _(<span class="stringliteral">&quot;Cool Link 3&quot;</span>), 1, NULL, NULL);
<a name="l01176"></a>01176                         }
<a name="l01177"></a>01177                 }
<a name="l01178"></a>01178         }
<a name="l01179"></a>01179 
<a name="l01180"></a>01180         <span class="keywordflow">if</span> (last_updated_utf8_string != NULL) {
<a name="l01181"></a>01181                 <span class="comment">/* see if Member Since is there, and if so, extract it. */</span>
<a name="l01182"></a>01182                 found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01183"></a>01183                                 <span class="stringliteral">&quot;Member Since:&quot;</span>, 1, last_updated_utf8_string,
<a name="l01184"></a>01184                                 <span class="charliteral">&#39;\n&#39;</span>, NULL, _(<span class="stringliteral">&quot;Member Since&quot;</span>), 0, NULL, yahoo_info_date_reformat);
<a name="l01185"></a>01185 
<a name="l01186"></a>01186                 <span class="comment">/* extract the Last Updated date and put it in */</span>
<a name="l01187"></a>01187                 found |= purple_markup_extract_info_field(stripped, stripped_len, user_info,
<a name="l01188"></a>01188                                 last_updated_utf8_string, (yd-&gt;jp ? 2 : 1), (yd-&gt;jp ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&quot; &quot;</span>), (yd-&gt;jp ? 0 : <span class="charliteral">&#39;\n&#39;</span>), NULL,
<a name="l01189"></a>01189                                 _(<span class="stringliteral">&quot;Last Update&quot;</span>), 0, NULL, (yd-&gt;jp ? NULL : yahoo_info_date_reformat));
<a name="l01190"></a>01190         }
<a name="l01191"></a>01191         } <span class="comment">/* if (profile_state == PROFILE_STATE_DEFAULT) */</span>
<a name="l01192"></a>01192 
<a name="l01193"></a>01193         <span class="keywordflow">if</span>(!found)
<a name="l01194"></a>01194         {
<a name="l01195"></a>01195                 <span class="keyword">const</span> gchar *str;
<a name="l01196"></a>01196 
<a name="l01197"></a>01197                 purple_notify_user_info_add_section_break(user_info);
<a name="l01198"></a>01198                 purple_notify_user_info_add_pair(user_info,
<a name="l01199"></a>01199                                 _(<span class="stringliteral">&quot;Error retrieving profile&quot;</span>), NULL);
<a name="l01200"></a>01200 
<a name="l01201"></a>01201                 <span class="keywordflow">if</span> (profile_state == PROFILE_STATE_UNKNOWN_LANGUAGE) {
<a name="l01202"></a>01202                         str = _(<span class="stringliteral">&quot;This profile is in a language &quot;</span>
<a name="l01203"></a>01203                                           <span class="stringliteral">&quot;or format that is not supported at this time.&quot;</span>);
<a name="l01204"></a>01204 
<a name="l01205"></a>01205                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (profile_state == PROFILE_STATE_NOT_FOUND) {
<a name="l01206"></a>01206                         <a class="code" href="struct___purple_buddy.html">PurpleBuddy</a> *b = purple_find_buddy
<a name="l01207"></a>01207                                         (purple_connection_get_account(info_data-&gt;gc),
<a name="l01208"></a>01208                                                         info_data-&gt;name);
<a name="l01209"></a>01209                         <a class="code" href="struct___yahoo_friend.html">YahooFriend</a> *f = NULL;
<a name="l01210"></a>01210                         <span class="keywordflow">if</span> (b) {
<a name="l01211"></a>01211                                 <span class="comment">/* Someone on the buddy list can be &quot;not on server list&quot;,</span>
<a name="l01212"></a>01212 <span class="comment">                                 * in which case the user may or may not actually exist.</span>
<a name="l01213"></a>01213 <span class="comment">                                 * Hence this extra step.</span>
<a name="l01214"></a>01214 <span class="comment">                                 */</span>
<a name="l01215"></a>01215                                 <a class="code" href="struct___purple_account.html">PurpleAccount</a> *account = purple_buddy_get_account(b);
<a name="l01216"></a>01216                                 f = yahoo_friend_find(purple_account_get_connection(account),
<a name="l01217"></a>01217                                                 purple_buddy_get_name(b));
<a name="l01218"></a>01218                         }
<a name="l01219"></a>01219                         str = f ? _(<span class="stringliteral">&quot;Could not retrieve the user&#39;s profile. &quot;</span>
<a name="l01220"></a>01220                                           <span class="stringliteral">&quot;This most likely is a temporary server-side problem. &quot;</span>
<a name="l01221"></a>01221                                           <span class="stringliteral">&quot;Please try again later.&quot;</span>) :
<a name="l01222"></a>01222                                         _(<span class="stringliteral">&quot;Could not retrieve the user&#39;s profile. &quot;</span>
<a name="l01223"></a>01223                                           <span class="stringliteral">&quot;This most likely means that the user does not exist; &quot;</span>
<a name="l01224"></a>01224                                           <span class="stringliteral">&quot;however, Yahoo! sometimes does fail to find a user&#39;s &quot;</span>
<a name="l01225"></a>01225                                           <span class="stringliteral">&quot;profile. If you know that the user exists, &quot;</span>
<a name="l01226"></a>01226                                           <span class="stringliteral">&quot;please try again later.&quot;</span>);
<a name="l01227"></a>01227                 } <span class="keywordflow">else</span> {
<a name="l01228"></a>01228                         str = _(<span class="stringliteral">&quot;The user&#39;s profile is empty.&quot;</span>);
<a name="l01229"></a>01229                 }
<a name="l01230"></a>01230 
<a name="l01231"></a>01231                 purple_notify_user_info_add_pair(user_info, NULL, str);
<a name="l01232"></a>01232         }
<a name="l01233"></a>01233 
<a name="l01234"></a>01234         <span class="comment">/* put a link to the actual profile URL */</span>
<a name="l01235"></a>01235         purple_notify_user_info_add_section_break(user_info);
<a name="l01236"></a>01236         tmp = g_strdup_printf(<span class="stringliteral">&quot;&lt;a href=\&quot;%s\&quot;&gt;%s&lt;/a&gt;&quot;</span>,
<a name="l01237"></a>01237                         profile_url_text, _(<span class="stringliteral">&quot;View web profile&quot;</span>));
<a name="l01238"></a>01238         purple_notify_user_info_add_pair(user_info, NULL, tmp);
<a name="l01239"></a>01239         g_free(tmp);
<a name="l01240"></a>01240 
<a name="l01241"></a>01241         g_free(stripped);
<a name="l01242"></a>01242 
<a name="l01243"></a>01243         <span class="comment">/* show it to the user */</span>
<a name="l01244"></a>01244         purple_notify_userinfo(info_data-&gt;gc, info_data-&gt;name,
<a name="l01245"></a>01245                                                   user_info, NULL, NULL);
<a name="l01246"></a>01246         purple_notify_user_info_destroy(user_info);
<a name="l01247"></a>01247 
<a name="l01248"></a>01248         g_free(last_updated_utf8_string);
<a name="l01249"></a>01249         g_free(url_buffer);
<a name="l01250"></a>01250         g_free(fudged_buffer);
<a name="l01251"></a>01251         g_free(profile_url_text);
<a name="l01252"></a>01252         g_free(info_data-&gt;name);
<a name="l01253"></a>01253         g_free(info_data);
<a name="l01254"></a>01254 
<a name="l01255"></a>01255 <span class="preprocessor">#if PHOTO_SUPPORT</span>
<a name="l01256"></a>01256 <span class="preprocessor"></span>        g_free(photo_url_text);
<a name="l01257"></a>01257         g_free(info2_data);
<a name="l01258"></a>01258         <span class="keywordflow">if</span> (<span class="keywordtype">id</span> != -1)
<a name="l01259"></a>01259                 purple_imgstore_unref_by_id(<span class="keywordtype">id</span>);
<a name="l01260"></a>01260 <span class="preprocessor">#endif </span><span class="comment">/* PHOTO_SUPPORT */</span>
<a name="l01261"></a>01261 }
<a name="l01262"></a>01262 
<a name="l01263"></a>01263 <span class="keywordtype">void</span> yahoo_get_info(<a class="code" href="struct___purple_connection.html">PurpleConnection</a> *gc, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
<a name="l01264"></a>01264 {
<a name="l01265"></a>01265         <a class="code" href="struct_yahoo_data.html">YahooData</a> *yd = gc-&gt;<a class="code" href="struct___purple_connection.html#a65c34f25cec84b2f513f7fdbd27d62bd">proto_data</a>;
<a name="l01266"></a>01266         <a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a> *data;
<a name="l01267"></a>01267         <span class="keywordtype">char</span> *url;
<a name="l01268"></a>01268         <a class="code" href="struct___purple_util_fetch_url_data.html">PurpleUtilFetchUrlData</a> *url_data;
<a name="l01269"></a>01269 
<a name="l01270"></a>01270         data       = g_new0(<a class="code" href="struct_yahoo_get_info_data.html">YahooGetInfoData</a>, 1);
<a name="l01271"></a>01271         data-&gt;gc   = gc;
<a name="l01272"></a>01272         data-&gt;name = g_strdup(name);
<a name="l01273"></a>01273 
<a name="l01274"></a>01274         url = g_strdup_printf(<span class="stringliteral">&quot;%s%s&quot;</span>,
<a name="l01275"></a>01275                         (yd-&gt;jp ? YAHOOJP_PROFILE_URL : YAHOO_PROFILE_URL), name);
<a name="l01276"></a>01276 
<a name="l01277"></a>01277         url_data = <a class="code" href="util_8h.html#a3a99b02ce53153ac1942b39107dfc26a">purple_util_fetch_url</a>(url, TRUE, NULL, FALSE, yahoo_got_info, data);
<a name="l01278"></a>01278         <span class="keywordflow">if</span> (url_data != NULL)
<a name="l01279"></a>01279                 yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a> = g_slist_prepend(yd-&gt;<a class="code" href="struct_yahoo_data.html#a752f2384adc12fb2ef98bae8c51cea4d">url_datas</a>, url_data);
<a name="l01280"></a>01280 
<a name="l01281"></a>01281         g_free(url);
<a name="l01282"></a>01282 }
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>yahoo_profile.c</b>      </li>
      <li class="footer">Generated on Sun Mar 24 2013 16:05:16 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
