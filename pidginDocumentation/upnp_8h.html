<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>upnp.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('upnp_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">upnp.h File Reference<div class="ingroups"><a class="el" href="group__core.html">libpurple</a></div></div>  </div>
</div>
<div class="contents">

<p><a href="upnp_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4dac448e583a7b51995c24b996c9ea48"></a><!-- doxytag: member="upnp.h::UPnPMappingAddRemove" ref="a4dac448e583a7b51995c24b996c9ea48" args="" -->
typedef struct <br class="typebreak"/>
<a class="el" href="struct___u_pn_p_mapping_add_remove.html">_UPnPMappingAddRemove</a>&#160;</td><td class="memItemRight" valign="bottom"><b>UPnPMappingAddRemove</b></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
UPnP API</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc9b8eb4689456de92e300904d219206"></a><!-- doxytag: member="upnp.h::PurpleUPnPCallback" ref="afc9b8eb4689456de92e300904d219206" args=")(gboolean success, gpointer data)" -->
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><b>PurpleUPnPCallback</b> )(gboolean success, gpointer data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8h.html#ac6315e13aa2e9e284b37ba5cc19225bc">purple_upnp_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8h.html#a42a4ba88ba568cf8cb1115b4b787a8f1">purple_upnp_discover</a> (PurpleUPnPCallback cb, gpointer <a class="el" href="structcb__data.html">cb_data</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const gchar *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8h.html#ac61647de7f52a3ea0bebf17a821d949f">purple_upnp_get_public_ip</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8h.html#ad0dc9ded8e1338af9e31637e75e18e8f">purple_upnp_cancel_port_mapping</a> (<a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *mapping_data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8h.html#a3a9a38e1b37575b21bfbe56ab29b68f9">purple_upnp_set_port_mapping</a> (unsigned short portmap, const gchar *protocol, PurpleUPnPCallback cb, gpointer <a class="el" href="structcb__data.html">cb_data</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="upnp_8h.html#a647d4b24df75c29696772cb2f5bb6f82">purple_upnp_remove_port_mapping</a> (unsigned short portmap, const gchar *protocol, PurpleUPnPCallback cb, gpointer <a class="el" href="structcb__data.html">cb_data</a>)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Universal Plug N Play API </p>

<p>Definition in file <a class="el" href="upnp_8h_source.html">upnp.h</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad0dc9ded8e1338af9e31637e75e18e8f"></a><!-- doxytag: member="upnp.h::purple_upnp_cancel_port_mapping" ref="ad0dc9ded8e1338af9e31637e75e18e8f" args="(UPnPMappingAddRemove *mapping_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_upnp_cancel_port_mapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a> *&#160;</td>
          <td class="paramname"><em>mapping_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cancel a pending port mapping request initiated with either <a class="el" href="upnp_8c.html#a3a9a38e1b37575b21bfbe56ab29b68f9">purple_upnp_set_port_mapping()</a> or <a class="el" href="upnp_8h.html#a647d4b24df75c29696772cb2f5bb6f82">purple_upnp_remove_port_mapping()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mapping_data</td><td>The data returned when you initiated the UPnP mapping request. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00937">937</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a42a4ba88ba568cf8cb1115b4b787a8f1"></a><!-- doxytag: member="upnp.h::purple_upnp_discover" ref="a42a4ba88ba568cf8cb1115b4b787a8f1" args="(PurpleUPnPCallback cb, gpointer cb_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_upnp_discover </td>
          <td>(</td>
          <td class="paramtype">PurpleUPnPCallback&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>cb_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a discovery request to search for a UPnP enabled IGD that contains the WANIPConnection service that will allow us to recieve the public IP address of the IGD, and control it for forwarding ports. The result will be cached for further use.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>an optional callback function to be notified when the UPnP discovery is complete </td></tr>
    <tr><td class="paramname"><a class="el" href="structcb__data.html">cb_data</a></td><td>Extra data to be passed to the callback </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00641">641</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac61647de7f52a3ea0bebf17a821d949f"></a><!-- doxytag: member="upnp.h::purple_upnp_get_public_ip" ref="ac61647de7f52a3ea0bebf17a821d949f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const gchar* purple_upnp_get_public_ip </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the IP address from a UPnP enabled IGD that sits on the local network, so when getting the network IP, instead of returning the local network IP, the public IP is retrieved. This is a cached value from the time of the UPnP discovery.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The IP address of the network, or NULL if something went wrong </dd></dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00746">746</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac6315e13aa2e9e284b37ba5cc19225bc"></a><!-- doxytag: member="upnp.h::purple_upnp_init" ref="ac6315e13aa2e9e284b37ba5cc19225bc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void purple_upnp_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize UPnP </p>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l01081">1081</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a647d4b24df75c29696772cb2f5bb6f82"></a><!-- doxytag: member="upnp.h::purple_upnp_remove_port_mapping" ref="a647d4b24df75c29696772cb2f5bb6f82" args="(unsigned short portmap, const gchar *protocol, PurpleUPnPCallback cb, gpointer cb_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a>* purple_upnp_remove_port_mapping </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>portmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PurpleUPnPCallback&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>cb_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes a port mapping in a UPnP enabled IGD that sits on the local network to this purple client. Essentially, this function takes care of deleting the port forwarding after they have completed a connection so another client on the local network can take advantage of the port forwarding</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">portmap</td><td>The port to delete the mapping for </td></tr>
    <tr><td class="paramname">protocol</td><td>The protocol to map to. Either "TCP" or "UDP" </td></tr>
    <tr><td class="paramname">cb</td><td>an optional callback function to be notified when the mapping removal is complete </td></tr>
    <tr><td class="paramname"><a class="el" href="structcb__data.html">cb_data</a></td><td>Extra data to be passed to the callback</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Data which can be passed to purple_upnp_port_mapping_cancel() to cancel </dd></dl>

</div>
</div>
<a class="anchor" id="a3a9a38e1b37575b21bfbe56ab29b68f9"></a><!-- doxytag: member="upnp.h::purple_upnp_set_port_mapping" ref="a3a9a38e1b37575b21bfbe56ab29b68f9" args="(unsigned short portmap, const gchar *protocol, PurpleUPnPCallback cb, gpointer cb_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct___u_pn_p_mapping_add_remove.html">UPnPMappingAddRemove</a>* purple_upnp_set_port_mapping </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>portmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gchar *&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PurpleUPnPCallback&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>cb_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maps Ports in a UPnP enabled IGD that sits on the local network to this purple client. Essentially, this function takes care of the port forwarding so things like file transfers can work behind NAT firewalls</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">portmap</td><td>The port to map to this client </td></tr>
    <tr><td class="paramname">protocol</td><td>The protocol to map, either "TCP" or "UDP" </td></tr>
    <tr><td class="paramname">cb</td><td>an optional callback function to be notified when the mapping addition is complete </td></tr>
    <tr><td class="paramname"><a class="el" href="structcb__data.html">cb_data</a></td><td>Extra data to be passed to the callback</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Data which can be passed to purple_upnp_port_mapping_cancel() to cancel </dd></dl>

<p>Definition at line <a class="el" href="upnp_8c_source.html#l00968">968</a> of file <a class="el" href="upnp_8c_source.html">upnp.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="upnp_8h.html">upnp.h</a>      </li>
      <li class="footer">Generated on Sun Mar 24 2013 16:05:19 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
